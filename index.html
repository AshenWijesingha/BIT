<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Viewport configuration optimized for mobile devices (especially Samsung S10 5G and similar high-DPI devices) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover, shrink-to-fit=no">
    
    <!-- Security Headers (Note: X-Frame-Options should be set via HTTP headers, not meta tags) -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <!-- Content Security Policy: Allow scripts from CDNs and inline styles (required for Tailwind CDN) -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline'; img-src 'self' https://res.cloudinary.com data:; font-src 'self' data:; connect-src 'self'; frame-src 'self'; object-src 'self';">
    
    <meta name="description" content="BIT Repository - Browse and view PDF course materials for Bachelor of Information Technology program. Access lecture notes, tutorials, and study materials for BIT students.">
    <meta name="theme-color" content="#2563eb">
    <meta name="author" content="BIT Repository">
    <meta name="keywords" content="BIT, Bachelor of Information Technology, PDF, course materials, study materials, university, lecture notes, tutorials, IT education, computing, semester materials">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://ashenwijesingha.github.io/BIT/">
    
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/jpeg" href="https://res.cloudinary.com/dkj22lm1g/image/upload/w_32,h_32,c_fill/v1768415117/BIT_Repository_xropb0.jpg">
    <link rel="icon" type="image/jpeg" sizes="16x16" href="https://res.cloudinary.com/dkj22lm1g/image/upload/w_16,h_16,c_fill/v1768415117/BIT_Repository_xropb0.jpg">
    <link rel="icon" type="image/jpeg" sizes="32x32" href="https://res.cloudinary.com/dkj22lm1g/image/upload/w_32,h_32,c_fill/v1768415117/BIT_Repository_xropb0.jpg">
    <link rel="icon" type="image/jpeg" sizes="96x96" href="https://res.cloudinary.com/dkj22lm1g/image/upload/w_96,h_96,c_fill/v1768415117/BIT_Repository_xropb0.jpg">
    <link rel="apple-touch-icon" sizes="180x180" href="https://res.cloudinary.com/dkj22lm1g/image/upload/w_180,h_180,c_fill/v1768415117/BIT_Repository_xropb0.jpg">
    
    <!-- Web App Manifest for PWA support -->
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="BIT Repository">
    <meta name="application-name" content="BIT Repository">
    <meta name="msapplication-TileColor" content="#2563eb">
    <meta name="msapplication-config" content="none">
    
    <!-- Open Graph meta tags for social sharing -->
    <meta property="og:title" content="BIT Repository - PDF Viewer | Course Materials for BIT Students">
    <meta property="og:description" content="Browse and view PDF course materials for Bachelor of Information Technology program. Access lecture notes, tutorials, and study materials organized by semester.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ashenwijesingha.github.io/BIT/">
    <meta property="og:image" content="https://res.cloudinary.com/dkj22lm1g/image/upload/w_1200,h_630,c_fill/v1768415117/BIT_Repository_xropb0.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="BIT Repository Logo - Bachelor of Information Technology Course Materials">
    <meta property="og:site_name" content="BIT Repository">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card meta tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BIT Repository - PDF Viewer | Course Materials for BIT Students">
    <meta name="twitter:description" content="Browse and view PDF course materials for Bachelor of Information Technology program. Access lecture notes and study materials.">
    <meta name="twitter:image" content="https://res.cloudinary.com/dkj22lm1g/image/upload/w_1200,h_630,c_fill/v1768415117/BIT_Repository_xropb0.jpg">
    <meta name="twitter:image:alt" content="BIT Repository Logo">
    
    <title>BIT Repository - PDF Viewer | Bachelor of Information Technology Course Materials</title>
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "BIT Repository",
        "alternateName": "Bachelor of Information Technology Repository",
        "url": "https://ashenwijesingha.github.io/BIT/",
        "description": "Browse and view PDF course materials for Bachelor of Information Technology program. Access lecture notes, tutorials, and study materials.",
        "image": "https://res.cloudinary.com/dkj22lm1g/image/upload/v1768415117/BIT_Repository_xropb0.jpg",
        "publisher": {
            "@type": "Organization",
            "name": "BIT Repository",
            "logo": {
                "@type": "ImageObject",
                "url": "https://res.cloudinary.com/dkj22lm1g/image/upload/v1768415117/BIT_Repository_xropb0.jpg"
            }
        },
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://ashenwijesingha.github.io/BIT/?pdf={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <!-- Tailwind CSS CDN - Note: Inline styles required, CSP allows 'unsafe-inline' for style-src -->
    <script src="https://cdn.tailwindcss.com" crossorigin="anonymous"></script>
    <!-- PDF.js library for rendering PDFs on all devices including mobile -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js" crossorigin="anonymous"></script>
    <style>
        /* Tailwind-like utility classes as fallback when CDN is blocked */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; }
        .min-h-screen { min-height: 100vh; }
        .bg-gray-100 { background-color: #f3f4f6; }
        .bg-white { background-color: #ffffff; }
        .bg-blue-600 { background-color: #2563eb; }
        .bg-blue-500 { background-color: #3b82f6; }
        .bg-blue-700 { background-color: #1d4ed8; }
        .bg-gray-200 { background-color: #e5e7eb; }
        .bg-gray-800 { background-color: #1f2937; }
        .text-white { color: #ffffff; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-gray-800 { color: #1f2937; }
        .text-gray-500 { color: #6b7280; }
        .text-gray-400 { color: #9ca3af; }
        .text-yellow-500 { color: #eab308; }
        .text-red-500 { color: #ef4444; }
        .text-blue-500 { color: #3b82f6; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .font-medium { font-weight: 500; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-base { font-size: 1rem; line-height: 1.5rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-center { text-align: center; }
        .flex { display: flex; }
        .inline-flex { display: inline-flex; }
        .hidden { display: none !important; }
        .block { display: block; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .flex-col { flex-direction: column; }
        .flex-1 { flex: 1 1 0%; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-shrink-0 { flex-shrink: 0; }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .p-1\.5 { padding: 0.375rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-1\.5 { padding-top: 0.375rem; padding-bottom: 0.375rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-2\.5 { padding-top: 0.625rem; padding-bottom: 0.625rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-3\.5 { padding-top: 0.875rem; padding-bottom: 0.875rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .pt-16 { padding-top: 4rem; }
        .pb-3 { padding-bottom: 0.75rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .px-10 { padding-left: 2.5rem; padding-right: 2.5rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mt-2 { margin-top: 0.5rem; }
        .ml-4 { margin-left: 1rem; }
        .mx-4 { margin-left: 1rem; margin-right: 1rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .w-64 { width: 16rem; }
        .w-80 { width: 20rem; }
        .w-full { width: 100%; }
        .h-full { height: 100%; }
        .h-3 { height: 0.75rem; }
        .h-4 { height: 1rem; }
        .h-5 { height: 1.25rem; }
        .h-6 { height: 1.5rem; }
        .h-7 { height: 1.75rem; }
        .h-10 { height: 2.5rem; }
        .h-12 { height: 3rem; }
        .h-16 { height: 4rem; }
        .h-20 { height: 5rem; }
        .h-24 { height: 6rem; }
        .h-28 { height: 7rem; }
        .w-3 { width: 0.75rem; }
        .w-4 { width: 1rem; }
        .w-5 { width: 1.25rem; }
        .w-6 { width: 1.5rem; }
        .w-7 { width: 1.75rem; }
        .w-10 { width: 2.5rem; }
        .w-12 { width: 3rem; }
        .w-16 { width: 4rem; }
        .w-20 { width: 5rem; }
        .w-24 { width: 6rem; }
        .w-28 { width: 7rem; }
        .max-w-xs { max-width: 20rem; }
        .max-w-sm { max-width: 24rem; }
        .max-w-md { max-width: 28rem; }
        .max-w-lg { max-width: 32rem; }
        .min-w-0 { min-width: 0; }
        .fixed { position: fixed; }
        .absolute { position: absolute; }
        .sticky { position: sticky; }
        .relative { position: relative; }
        .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
        .left-3 { left: 0.75rem; }
        .top-2\.5 { top: 0.625rem; }
        .top-3 { top: 0.75rem; }
        .top-14 { top: 3.5rem; }
        .top-16 { top: 4rem; }
        .z-30 { z-index: 30; }
        .z-40 { z-index: 40; }
        .z-50 { z-index: 50; }
        .overflow-y-auto { overflow-y: auto; }
        .overflow-x-hidden { overflow-x: hidden; }
        .overflow-hidden { overflow: hidden; }
        .rounded { border-radius: 0.25rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-t-lg { border-top-left-radius: 0.5rem; border-top-right-radius: 0.5rem; }
        .rounded-b-lg { border-bottom-left-radius: 0.5rem; border-bottom-right-radius: 0.5rem; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
        .truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .break-words { overflow-wrap: break-word; word-break: break-word; }
        .whitespace-nowrap { white-space: nowrap; }
        .cursor-pointer { cursor: pointer; }
        .transition-transform { transition-property: transform; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .duration-300 { transition-duration: 300ms; }
        .border { border-width: 1px; }
        .border-gray-200 { border-color: #e5e7eb; }
        .border-gray-100 { border-color: #f3f4f6; }
        .border-gray-300 { border-color: #d1d5db; }
        
        /* Animation utilities */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        
        /* Additional spacing and sizing */
        .min-h-\[500px\] { min-height: 500px; }
        .min-h-\[400px\] { min-height: 400px; }
        .ring-4 { box-shadow: 0 0 0 4px var(--tw-ring-color, #3b82f6); }
        .ring-blue-100 { --tw-ring-color: #dbeafe; }
        .ring-2 { box-shadow: 0 0 0 2px var(--tw-ring-color, #3b82f6); }
        .ring-white { --tw-ring-color: rgba(255, 255, 255, 1); }
        .object-cover { object-fit: cover; }
        .shadow-md { box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .shadow-2xl { box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25); }
        .-top-1 { top: -0.25rem; }
        .-right-1 { right: -0.25rem; }
        .bg-green-500 { background-color: #22c55e; }
        .rounded-full { border-radius: 9999px; }
        .rounded-2xl { border-radius: 1rem; }
        .text-gray-900 { color: #111827; }
        
        /* Transform utilities */
        .-translate-x-full { transform: translateX(-100%); }
        .translate-x-0 { transform: translateX(0); }
        .rotate-90 { transform: rotate(90deg); }
        
        /* Hover states */
        .hover\:bg-gray-100:hover { background-color: #f3f4f6; }
        .hover\:bg-gray-300:hover { background-color: #d1d5db; }
        .hover\:bg-blue-600:hover { background-color: #2563eb; }
        .hover\:bg-blue-700:hover { background-color: #1d4ed8; }
        .hover\:bg-blue-800:hover { background-color: #1e40af; }
        .hover\:shadow-lg:hover { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
        .hover\:shadow-xl:hover { box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1); }
        .hover\:-translate-y-1:hover { transform: translateY(-0.25rem); }
        .active\:scale-95:active { transform: scale(0.95); }
        .transition-colors { transition-property: color, background-color, border-color; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .duration-200 { transition-duration: 200ms; }
        .hover\:scale-105:hover { transform: scale(1.05); }
        
        /* Focus utilities for accessibility */
        .focus\:outline-none:focus { outline: none; }
        .focus\:ring-2:focus { box-shadow: 0 0 0 2px var(--tw-ring-color, #3b82f6); }
        .focus\:ring-blue-500:focus { --tw-ring-color: #3b82f6; }
        .focus\:border-blue-500:focus { border-color: #3b82f6; }
        .focus\:ring-offset-0:focus { --tw-ring-offset-width: 0px; }
        .group:focus-within .group-focus-within\:text-blue-500 { color: #3b82f6; }
        .hover\:border-gray-400:hover { border-color: #9ca3af; }
        .placeholder\:text-gray-400::placeholder { color: #9ca3af; }
        .hover\:text-blue-600:hover { color: #2563eb; }
        .hover\:underline:hover { text-decoration: underline; }
        .bg-gradient-to-r { background: linear-gradient(to right, var(--tw-gradient-stops)); }
        .from-blue-600 { --tw-gradient-from: #2563eb; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, transparent); }
        .to-blue-700 { --tw-gradient-to: #1d4ed8; }
        .to-purple-600 { --tw-gradient-to: #9333ea; }
        .bg-clip-text { -webkit-background-clip: text; background-clip: text; }
        .text-transparent { color: transparent; }
        .inline-block { display: inline-block; }
        
        /* Mobile-first responsive utilities */
        /* Extra small devices (phones, less than 480px) */
        @media (max-width: 480px) {
            .xs\:hidden { display: none !important; }
            .xs\:block { display: block !important; }
            .xs\:flex { display: flex !important; }
            .xs\:text-xs { font-size: 0.75rem; line-height: 1rem; }
            .xs\:text-sm { font-size: 0.875rem; line-height: 1.25rem; }
            .xs\:text-base { font-size: 1rem; line-height: 1.5rem; }
            .xs\:p-2 { padding: 0.5rem; }
            .xs\:p-3 { padding: 0.75rem; }
            .xs\:px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
            .xs\:py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
            .xs\:gap-1 { gap: 0.25rem; }
            .xs\:gap-2 { gap: 0.5rem; }
            .xs\:w-full { width: 100%; }
            .xs\:flex-col { flex-direction: column; }
            .xs\:flex-wrap { flex-wrap: wrap; }
            
            /* Improve touch targets for mobile - minimum 44x44px for accessibility */
            button, .sidebar-item, a[role="button"] { 
                min-height: 44px; 
                min-width: 44px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Better text sizes for mobile readability */
            body { font-size: 16px; } /* Prevent zoom on iOS */
            
            /* Adjust header for mobile */
            header h1 { 
                font-size: 0.875rem;
                gap: 0.375rem;
            }
            
            header h1 img {
                height: 1.75rem;
                width: 1.75rem;
            }
            
            /* Make buttons more prominent on mobile */
            header button { 
                padding: 0.5rem;
                min-width: 44px;
                min-height: 44px;
            }
            
            /* Sidebar improvements for mobile */
            .sidebar-item, .folder-container > div {
                padding: 0.625rem 0.5rem;
                min-height: 48px;
            }
            
            /* Footer adjustments for mobile */
            .footer {
                padding: 1rem 0.75rem;
                text-align: center;
            }
            
            .footer .flex {
                flex-direction: column;
                gap: 0.75rem;
            }
        }
        
        /* Small devices (phones, 480px and up) */
        @media (min-width: 480px) {
            .sm\:hidden { display: none !important; }
            .sm\:block { display: block !important; }
            .sm\:inline { display: inline !important; }
            .sm\:inline-flex { display: inline-flex !important; }
            .sm\:flex { display: flex !important; }
            .sm\:text-sm { font-size: 0.875rem; line-height: 1.25rem; }
            .sm\:text-base { font-size: 1rem; line-height: 1.5rem; }
            .sm\:text-lg { font-size: 1.125rem; line-height: 1.75rem; }
            .sm\:text-xl { font-size: 1.25rem; line-height: 1.75rem; }
            .sm\:p-2 { padding: 0.5rem; }
            .sm\:p-3 { padding: 0.75rem; }
            .sm\:p-4 { padding: 1rem; }
            .sm\:p-6 { padding: 1.5rem; }
            .sm\:px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
            .sm\:px-4 { padding-left: 1rem; padding-right: 1rem; }
            .sm\:py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
            .sm\:py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
            .sm\:gap-1 { gap: 0.25rem; }
            .sm\:gap-2 { gap: 0.5rem; }
            .sm\:gap-3 { gap: 0.75rem; }
            .sm\:gap-4 { gap: 1rem; }
            .sm\:mb-4 { margin-bottom: 1rem; }
            .sm\:h-5 { height: 1.25rem; }
            .sm\:w-5 { width: 1.25rem; }
            .sm\:h-6 { height: 1.5rem; }
            .sm\:w-6 { width: 1.5rem; }
            .sm\:h-4 { height: 1rem; }
            .sm\:w-4 { width: 1rem; }
            .sm\:h-20 { height: 5rem; }
            .sm\:w-20 { width: 5rem; }
            .sm\:flex-row { flex-direction: row; }
        }
        
        /* Medium devices (tablets, 768px and up) */
        @media (min-width: 768px) {
            .md\:hidden { display: none !important; }
            .md\:block { display: block !important; }
            .md\:inline-flex { display: inline-flex !important; }
            .md\:flex { display: flex !important; }
            .md\:text-base { font-size: 1rem; line-height: 1.5rem; }
            .md\:text-lg { font-size: 1.125rem; line-height: 1.75rem; }
            .md\:text-xl { font-size: 1.25rem; line-height: 1.75rem; }
            .md\:text-2xl { font-size: 1.5rem; line-height: 2rem; }
            .md\:p-3 { padding: 0.75rem; }
            .md\:p-4 { padding: 1rem; }
            .md\:p-6 { padding: 1.5rem; }
            .md\:p-8 { padding: 2rem; }
            .md\:px-4 { padding-left: 1rem; padding-right: 1rem; }
            .md\:gap-3 { gap: 0.75rem; }
            .md\:gap-4 { gap: 1rem; }
            .md\:h-24 { height: 6rem; }
            .md\:w-24 { width: 6rem; }
            .md\:flex-row { flex-direction: row; }
        }
        
        /* Large devices (desktops, 1024px and up) */
        @media (min-width: 1024px) {
            .lg\:ml-80 { margin-left: 20rem; }
            .lg\:ml-16 { margin-left: 4rem; }
            .lg\:translate-x-0 { transform: translateX(0); }
            .lg\:hidden { display: none !important; }
            .lg\:block { display: block !important; }
            .lg\:inline-flex { display: inline-flex !important; }
            .lg\:flex { display: flex !important; }
            .lg\:text-base { font-size: 1rem; line-height: 1.5rem; }
            .lg\:text-lg { font-size: 1.125rem; line-height: 1.75rem; }
            .lg\:text-xl { font-size: 1.25rem; line-height: 1.75rem; }
            .lg\:text-2xl { font-size: 1.5rem; line-height: 2rem; }
            .lg\:p-4 { padding: 1rem; }
            .lg\:p-8 { padding: 2rem; }
            .lg\:gap-4 { gap: 1rem; }
        }
        
        /* Extra large devices (large desktops, 1280px and up) */
        @media (min-width: 1280px) {
            .xl\:text-lg { font-size: 1.125rem; line-height: 1.75rem; }
            .xl\:text-xl { font-size: 1.25rem; line-height: 1.75rem; }
            .xl\:text-2xl { font-size: 1.5rem; line-height: 2rem; }
            .xl\:text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
            .xl\:p-6 { padding: 1.5rem; }
            .xl\:gap-6 { gap: 1.5rem; }
        }
        
        /* 2X large devices (larger desktops, 1536px and up) */
        @media (min-width: 1536px) {
            .\32xl\:text-2xl { font-size: 1.5rem; line-height: 2rem; }
            .\32xl\:text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
            .\32xl\:p-8 { padding: 2rem; }
        }
        
        /* Landscape orientation optimization for mobile devices */
        @media (max-width: 768px) and (orientation: landscape) {
            .header-height { height: 48px; }
            .header-spacing { padding-top: 48px; }
            .sidebar-position { top: 48px; height: calc(100vh - 48px); }
            #pdfCanvasContainer { height: calc(100vh - 10rem); }
        }

        /* Custom scrollbar styling */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Active sidebar item */
        .sidebar-item.active { 
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white; 
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
            transform: translateX(2px);
        }
        .sidebar-item.active span { color: white; }
        .sidebar-item.active svg { color: white; }
        
        /* Sidebar item hover improvements */
        .sidebar-item:hover:not(.active) {
            background-color: #f9fafb;
            transform: translateX(2px);
        }
        
        body.dark-mode .sidebar-item:hover:not(.active) {
            background-color: #374151;
        }
        
        /* Folder hover improvements */
        .folder-container > div:hover {
            background-color: #f9fafb;
        }
        
        body.dark-mode .folder-container > div:hover {
            background-color: #374151;
        }
        
        /* Folder expansion animation */
        .folder-content { max-height: 0; overflow: hidden; transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .folder-content.expanded { max-height: 5000px; }
        
        /* PDF container - responsive heights */
        .pdf-iframe-container {
            background: #525659;
            min-height: calc(100vh - 10rem);
            border-radius: 0 0 0.5rem 0.5rem;
            overflow: auto;
            position: relative;
        }
        
        .pdf-iframe-container iframe,
        .pdf-iframe-container object {
            width: 100%;
            height: calc(100vh - 10rem);
            border: none;
            border-radius: 0 0 0.5rem 0.5rem;
        }
        
        /* PDF.js canvas rendering container */
        #pdfCanvasContainer {
            width: 100%;
            height: calc(100vh - 10rem);
            overflow: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
            gap: 1rem;
        }
        
        .pdf-page-canvas {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            background: white;
            /* Enable hardware acceleration for better performance */
            will-change: transform;
            max-width: 100%;
            width: 100%;
            height: auto;
            /* Prevent overflow on mobile devices */
            object-fit: contain;
        }
        
        @media (max-width: 768px) {
            .pdf-iframe-container {
                min-height: calc(100vh - 14rem);
            }
            .pdf-iframe-container iframe,
            .pdf-iframe-container object {
                height: calc(100vh - 14rem);
            }
            #pdfCanvasContainer {
                height: calc(100vh - 14rem);
                padding: 0.5rem;
            }
        }
        
        /* Fullscreen mode styles */
        .pdf-iframe-container:fullscreen,
        .pdf-iframe-container:-webkit-full-screen,
        .pdf-iframe-container:-moz-full-screen,
        .pdf-iframe-container:-ms-fullscreen {
            width: 100vw !important;
            height: 100vh !important;
            max-width: 100vw !important;
            max-height: 100vh !important;
            border-radius: 0 !important;
            background: #525659;
        }
        
        .pdf-iframe-container:fullscreen iframe,
        .pdf-iframe-container:fullscreen object,
        .pdf-iframe-container:-webkit-full-screen iframe,
        .pdf-iframe-container:-webkit-full-screen object {
            width: 100vw !important;
            height: 100vh !important;
            border-radius: 0 !important;
        }
        
        .pdf-iframe-container:fullscreen #pdfCanvasContainer,
        .pdf-iframe-container:-webkit-full-screen #pdfCanvasContainer {
            width: 100vw !important;
            height: 100vh !important;
            max-width: 100vw !important;
            max-height: 100vh !important;
            padding: 0.25rem;
        }
        
        /* Hide controls when in fullscreen */
        .fullscreen-active .pdf-controls-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }
        
        .fullscreen-active .pdf-controls-wrapper:hover,
        .fullscreen-active .pdf-controls-wrapper.show-controls {
            transform: translateY(0);
        }
        
        /* Responsive sidebar width */
        .sidebar-responsive {
            width: 100%;
            max-width: 20rem;
        }
        
        @media (min-width: 480px) {
            .sidebar-responsive {
                width: 20rem;
            }
        }
        
        /* Minimized sidebar state (desktop only) */
        @media (min-width: 1024px) {
            .sidebar-responsive.minimized {
                width: 4rem;
                max-width: 4rem;
            }
            
            .sidebar-responsive.minimized .sidebar-text,
            .sidebar-responsive.minimized .search-container,
            .sidebar-responsive.minimized .file-stats-container,
            .sidebar-responsive.minimized .sidebar-section-title,
            .sidebar-responsive.minimized .folder-name,
            .sidebar-responsive.minimized .sidebar-section-header button {
                display: none !important;
            }
            
            .sidebar-responsive.minimized .sidebar-item,
            .sidebar-responsive.minimized .folder-container > div {
                justify-content: center;
                padding-left: 0;
                padding-right: 0;
                margin-left: 0 !important;
            }
            
            .sidebar-responsive.minimized .folder-content {
                display: none !important;
            }
        }
        
        /* Loading spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Sidebar overlay */
        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 30;
        }
        
        /* Header height constants */
        .header-height { height: 56px; transition: height 0.3s ease; }
        .header-spacing { padding-top: 56px; }
        .sidebar-position { top: 56px; height: calc(100vh - 56px); }
        .main-min-height { min-height: calc(100vh - 56px); }
        .content-min-height { min-height: calc(100vh - 7rem); }
        
        /* Ensure proper height calculations */
        html, body { height: 100%; }
        
        /* Smooth scrolling */
        html { scroll-behavior: smooth; }
        
        /* Improve text rendering */
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        /* Focus visible for accessibility */
        *:focus-visible {
            outline: 2px solid #3b82f6;
            outline-offset: 4px;
        }
        
        /* Prevent horizontal scroll on mobile */
        body {
            overflow-x: hidden;
        }
        
        /* Safe area insets for notched devices */
        @supports (padding: max(0px)) {
            header {
                padding-left: max(0.75rem, env(safe-area-inset-left));
                padding-right: max(0.75rem, env(safe-area-inset-right));
            }
            .sidebar-responsive {
                padding-left: max(0, env(safe-area-inset-left));
            }
        }
        
        /* Dark mode styles */
        body.dark-mode {
            background-color: #111827;
            color: #f3f4f6;
        }
        
        body.dark-mode .bg-white { background-color: #1f2937; }
        body.dark-mode .bg-gray-100 { background-color: #111827; }
        body.dark-mode .bg-gray-200 { background-color: #374151; }
        body.dark-mode .text-gray-600 { color: #d1d5db; }
        body.dark-mode .text-gray-700 { color: #e5e7eb; }
        body.dark-mode .text-gray-800 { color: #f3f4f6; }
        body.dark-mode .text-gray-500 { color: #9ca3af; }
        body.dark-mode .border-gray-200 { border-color: #374151; }
        body.dark-mode .hover\:bg-gray-100:hover { background-color: #374151; }
        body.dark-mode .hover\:bg-gray-300:hover { background-color: #4b5563; }
        body.dark-mode .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3); }
        body.dark-mode .pdf-iframe-container { background: #1f2937; }
        body.dark-mode input {
            background-color: #374151;
            border-color: #4b5563;
            color: #f3f4f6;
        }
        body.dark-mode input::placeholder {
            color: #9ca3af;
        }
        body.dark-mode input:focus {
            background-color: #4b5563;
        }
        
        /* Toast notification styles */
        .toast-container {
            position: fixed;
            bottom: 6rem;
            right: 1rem;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .toast {
            background-color: #1f2937;
            color: #ffffff;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            animation: slideIn 0.3s ease-out;
            max-width: 300px;
        }
        
        .toast.success { background-color: #059669; }
        .toast.error { background-color: #dc2626; }
        .toast.info { background-color: #2563eb; }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        .toast.fade-out {
            animation: slideOut 0.3s ease-out forwards;
        }
        
        /* Scroll to top button */
        .scroll-to-top {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            z-index: 60;
            background-color: #2563eb;
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgb(0 0 0 / 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .scroll-to-top:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
        }
        
        .scroll-to-top.visible {
            display: flex;
        }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(4px);
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            animation: overlayFadeIn 0.2s ease-out;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background-color: #ffffff;
            border-radius: 1rem;
            max-width: 32rem;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.35);
            animation: modalFadeIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        body.dark-mode .modal-content {
            background-color: #1f2937;
            border-color: rgba(255, 255, 255, 0.05);
        }
        
        @keyframes overlayFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes modalFadeIn {
            from { transform: scale(0.9) translateY(-20px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }
        
        /* Reduced motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            .modal-content {
                animation: modalFadeInSimple 0.2s ease-out;
            }
            
            @keyframes modalFadeInSimple {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            /* Disable all transform animations */
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            /* Keep essential opacity transitions */
            .modal-overlay,
            .sidebar-overlay {
                transition: opacity 0.15s ease !important;
            }
        }
        
        /* Footer styles */
        .footer {
            background-color: #1f2937;
            color: #9ca3af;
            padding: 1.5rem 1rem;
            margin-top: auto;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: margin-left 0.3s ease, padding-left 0.3s ease;
        }
        
        /* Footer adjusts with sidebar state on desktop */
        @media (min-width: 1024px) {
            .footer {
                margin-left: 20rem;
            }
            
            .footer.sidebar-minimized {
                margin-left: 4rem;
            }
        }
        
        .footer > div {
            max-width: 48rem;
            width: 100%;
        }
        
        @media (max-width: 640px) {
            .footer {
                padding: 1.25rem 1rem;
            }
            
            .footer .flex.flex-wrap {
                flex-direction: column;
                align-items: center;
            }
        }
        
        .footer a {
            color: #3b82f6;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .footer a:hover {
            color: #60a5fa;
        }
        
        /* Sidebar section styles */
        .sidebar-section {
            border-top: 1px solid #e5e7eb;
            padding-top: 0.75rem;
        }
        
        body.dark-mode .sidebar-section {
            border-color: #374151;
        }
        
        .sidebar-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }
        
        .sidebar-section-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: #374151;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        body.dark-mode .sidebar-section-title {
            color: #9ca3af;
        }
        
        /* Skip to content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #2563eb;
            color: white;
            padding: 8px 16px;
            z-index: 1000;
            text-decoration: none;
            border-radius: 0 0 4px 0;
        }
        
        .skip-link:focus {
            top: 0;
        }
        
        /* Keyboard shortcut styling */
        .kbd {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            font-family: monospace;
            font-size: 0.875rem;
            background-color: #e5e7eb;
            border: 1px solid #d1d5db;
            border-radius: 0.25rem;
            box-shadow: 0 1px 2px rgb(0 0 0 / 0.1);
        }
        
        body.dark-mode .kbd {
            background-color: #374151;
            border-color: #4b5563;
            color: #e5e7eb;
        }
        
        /* File statistics badge */
        .stats-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            color: #1e40af;
            padding: 0.375rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }
        
        .stats-badge:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }
        
        body.dark-mode .stats-badge {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6f 100%);
            color: #93c5fd;
        }
        
        /* Folder action buttons */
        .folder-actions {
            display: flex;
            gap: 0.375rem;
        }
        
        .folder-action-btn {
            padding: 0.375rem;
            border-radius: 0.375rem;
            color: #6b7280;
            transition: all 0.2s ease;
            background-color: transparent;
            border: 1px solid transparent;
        }
        
        .folder-action-btn:hover {
            background-color: #f3f4f6;
            color: #374151;
            border-color: #e5e7eb;
            transform: scale(1.05);
        }
        
        .folder-action-btn:active {
            transform: scale(0.95);
        }
        
        body.dark-mode .folder-action-btn:hover {
            background-color: #374151;
            color: #e5e7eb;
            border-color: #4b5563;
        }
        
        /* Loading skeleton styles */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 0.25rem;
        }
        
        body.dark-mode .skeleton {
            background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
            background-size: 200% 100%;
        }
        
        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .skeleton-text {
            height: 1rem;
            width: 100%;
            margin-bottom: 0.5rem;
        }
        
        .skeleton-text-short {
            width: 60%;
        }
        
        .skeleton-icon {
            width: 1rem;
            height: 1rem;
            border-radius: 0.25rem;
        }
        
        /* File tree loading skeleton */
        .file-tree-skeleton {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            padding: 0.5rem 0;
        }
        
        .file-tree-skeleton-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
        }
        
        /* Error state styling */
        .error-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
            text-align: center;
        }
        
        .error-state svg {
            width: 3rem;
            height: 3rem;
            color: #ef4444;
            margin-bottom: 1rem;
        }
        
        .error-state h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        
        body.dark-mode .error-state h3 {
            color: #e5e7eb;
        }
        
        .error-state p {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 1rem;
        }
        
        body.dark-mode .error-state p {
            color: #9ca3af;
        }
        
        .error-state button {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: #ffffff;
            background-color: #2563eb;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }
        
        .error-state button:hover {
            background-color: #1d4ed8;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to content</a>
    
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg fixed w-full z-50 header-height">
        <div class="px-3 sm:px-4 py-2 sm:py-3 flex items-center justify-between h-full">
            <h1 class="text-base sm:text-lg md:text-xl lg:text-2xl font-bold flex items-center gap-1 sm:gap-2 min-w-0">
                <img src="https://res.cloudinary.com/dkj22lm1g/image/upload/w_40,h_40,c_fill/v1768415117/BIT_Repository_xropb0.jpg" alt="BIT Repository Logo" loading="lazy" class="h-7 w-7 sm:h-10 sm:w-10 rounded-lg flex-shrink-0 object-cover shadow-md ring-2 ring-white ring-opacity-30">
                <span class="truncate text-sm sm:text-base md:text-lg lg:text-xl">BIT Repository</span>
                <span class="hidden sm:inline truncate text-sm md:text-base lg:text-lg opacity-90"> - PDF Viewer</span>
            </h1>
            <div class="flex items-center gap-1 sm:gap-2">
                <!-- Help/Keyboard Shortcuts -->
                <button id="helpButton" class="bg-blue-700 hover:bg-blue-800 hover:shadow-md active:bg-blue-900 active:shadow-lg px-2 sm:px-3 py-2 rounded-lg flex-shrink-0 transition-all duration-200 transform hover:scale-105 active:scale-95" aria-label="Help and keyboard shortcuts" title="Help (Press ?)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
                    </svg>
                </button>
                <!-- Dark Mode Toggle -->
                <button id="darkModeToggle" class="bg-blue-700 hover:bg-blue-800 hover:shadow-md active:bg-blue-900 active:shadow-lg px-2 sm:px-3 py-2 rounded-lg flex-shrink-0 transition-all duration-200 transform hover:scale-105 active:scale-95" aria-label="Toggle dark mode" title="Toggle dark mode">
                    <svg id="darkModeIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
                    </svg>
                </button>
                <!-- Sidebar Toggle -->
                <button id="toggleSidebar" class="lg:hidden bg-blue-700 hover:bg-blue-800 hover:shadow-md active:bg-blue-900 active:shadow-lg px-2 sm:px-3 py-2 rounded-lg flex-shrink-0 transition-all duration-200 transform hover:scale-105 active:scale-95" aria-label="Toggle sidebar" title="Toggle sidebar">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <div class="flex flex-1 header-spacing">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar-responsive sidebar-position bg-white dark:bg-gray-800 shadow-2xl fixed overflow-y-auto transition-all duration-300 z-40 -translate-x-full lg:translate-x-0 border-r border-gray-200 dark:border-gray-700">
            <div class="p-3 sm:p-4">
                <div class="flex items-center justify-between mb-3 sm:mb-4 pb-3 border-b border-gray-200 dark:border-gray-700">
                    <h2 class="sidebar-text text-sm sm:text-base lg:text-lg font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                        </svg>
                        <span>PDF Files</span>
                    </h2>
                    <button id="minimizeSidebar" class="hidden lg:flex hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition-colors" aria-label="Minimize sidebar" title="Minimize sidebar">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5" />
                        </svg>
                    </button>
                </div>
                
                <!-- Search Bar -->
                <div class="search-container mb-3 sm:mb-4 relative group">
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="Search PDFs..." 
                        class="w-full px-10 py-2.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-0 focus:border-blue-500 dark:focus:ring-blue-400 transition-all duration-200 bg-white dark:bg-gray-700 dark:text-white hover:border-gray-400 dark:hover:border-gray-500 placeholder:text-gray-400 dark:placeholder:text-gray-500"
                        aria-label="Search for PDF files by name or folder"
                    />
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 text-gray-400 dark:text-gray-500 absolute left-3 top-2.5 group-focus-within:text-blue-500 dark:group-focus-within:text-blue-400 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                    </svg>
                </div>
                
                <!-- File Statistics and Folder Controls -->
                <div class="file-stats-container flex items-center justify-between mb-3">
                    <span id="fileStats" class="stats-badge">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                        </svg>
                        <span id="fileCount">0 files</span>
                    </span>
                    <div class="folder-actions">
                        <button id="expandAllBtn" class="folder-action-btn" title="Expand all folders" aria-label="Expand all folders">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" />
                            </svg>
                        </button>
                        <button id="collapseAllBtn" class="folder-action-btn" title="Collapse all folders" aria-label="Collapse all folders">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 12h14" />
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- Favorites Section -->
                <div id="favoritesSection" class="sidebar-section hidden">
                    <div class="sidebar-section-header">
                        <span class="sidebar-section-title"> Favorites</span>
                        <button id="clearFavorites" class="text-xs text-gray-400 hover:text-red-500 transition-colors" title="Clear all favorites">Clear</button>
                    </div>
                    <div id="favoritesList" class="space-y-1 max-h-32 overflow-y-auto">
                        <!-- Favorites will be populated dynamically -->
                    </div>
                </div>
                
                <!-- Recently Viewed Section -->
                <div id="recentSection" class="sidebar-section hidden">
                    <div class="sidebar-section-header">
                        <span class="sidebar-section-title"> Recently Viewed</span>
                        <button id="clearRecent" class="text-xs text-gray-400 hover:text-red-500 transition-colors" title="Clear history">Clear</button>
                    </div>
                    <div id="recentList" class="space-y-1 max-h-32 overflow-y-auto">
                        <!-- Recent files will be populated dynamically -->
                    </div>
                </div>
                
                <!-- All Files Section -->
                <div class="sidebar-section">
                    <div class="sidebar-section-header">
                        <span class="sidebar-section-title"> All Files</span>
                    </div>
                    <div id="fileTree" class="space-y-2">
                        <!-- Loading skeleton - shown while files.json is being fetched -->
                        <div id="fileTreeSkeleton" class="file-tree-skeleton">
                            <div class="file-tree-skeleton-item">
                                <div class="skeleton skeleton-icon"></div>
                                <div class="skeleton skeleton-text skeleton-text-short"></div>
                            </div>
                            <div class="file-tree-skeleton-item" style="margin-left: 1rem;">
                                <div class="skeleton skeleton-icon"></div>
                                <div class="skeleton skeleton-text"></div>
                            </div>
                            <div class="file-tree-skeleton-item" style="margin-left: 1rem;">
                                <div class="skeleton skeleton-icon"></div>
                                <div class="skeleton skeleton-text skeleton-text-short"></div>
                            </div>
                            <div class="file-tree-skeleton-item">
                                <div class="skeleton skeleton-icon"></div>
                                <div class="skeleton skeleton-text"></div>
                            </div>
                            <div class="file-tree-skeleton-item" style="margin-left: 1rem;">
                                <div class="skeleton skeleton-icon"></div>
                                <div class="skeleton skeleton-text skeleton-text-short"></div>
                            </div>
                        </div>
                        <!-- File tree will be dynamically populated by buildFileTree() function -->
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main id="main-content" class="flex-1 lg:ml-80 p-2 sm:p-3 md:p-4 flex flex-col">
            <!-- Welcome Message -->
            <div id="welcomeMessage" class="flex flex-col items-center justify-center text-center flex-1 min-h-[500px]">
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 sm:p-8 max-w-lg mx-4 border border-gray-100 dark:border-gray-700">
                    <div class="relative inline-block mb-6">
                        <img src="https://res.cloudinary.com/dkj22lm1g/image/upload/w_192,h_192,c_fill/v1768415117/BIT_Repository_xropb0.jpg" alt="BIT Repository Logo" loading="lazy" class="h-24 w-24 sm:h-28 sm:w-28 mx-auto rounded-2xl shadow-lg mb-2 object-cover ring-4 ring-blue-100 dark:ring-blue-900">
                        <div class="absolute -top-1 -right-1 h-6 w-6 bg-green-500 rounded-full border-4 border-white dark:border-gray-800 animate-pulse" aria-hidden="true"></div>
                    </div>
                    <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">Welcome to BIT Repository</h2>
                    <p class="text-base text-gray-700 dark:text-gray-300 mb-3 font-medium">Browse and view PDF course materials</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">Access lecture notes, tutorials, and study materials for the Bachelor of Information Technology program.</p>
                    <div class="flex flex-col gap-3 justify-center w-full max-w-xs mx-auto">
                        <button id="browseFilesBtn" class="lg:hidden bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3.5 rounded-xl font-semibold transition-all duration-200 w-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 active:scale-95" aria-label="Browse PDF files">
                            <span class="flex items-center justify-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
                                </svg>
                                Browse Files
                            </span>
                        </button>
                        <button id="viewHelpBtn" class="bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 px-6 py-3.5 rounded-xl font-semibold transition-all duration-200 w-full shadow-md hover:shadow-lg transform hover:-translate-y-1 active:scale-95 border border-gray-200 dark:border-gray-600" aria-label="View help and keyboard shortcuts">
                            <span class="flex items-center justify-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
                                </svg>
                                View Help
                            </span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="hidden flex-col items-center justify-center flex-1 min-h-[400px]">
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 sm:p-10 max-w-sm mx-4 border border-gray-100 dark:border-gray-700">
                    <div class="relative mb-6">
                        <img src="https://res.cloudinary.com/dkj22lm1g/image/upload/w_80,h_80,c_fill/v1768415117/BIT_Repository_xropb0.jpg" alt="BIT Repository Logo - Loading" class="h-20 w-20 mx-auto rounded-xl mb-2 object-cover animate-pulse shadow-lg ring-4 ring-blue-100 dark:ring-blue-900">
                        <div class="absolute inset-0 rounded-xl bg-gradient-to-tr from-blue-500/20 to-purple-500/20 animate-pulse"></div>
                    </div>
                    <div class="loader mb-6 mx-auto"></div>
                    <p class="text-lg text-gray-800 dark:text-gray-200 font-semibold mb-2">Loading PDF...</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Please wait while we prepare your document</p>
                </div>
            </div>

            <!-- PDF Viewer Container -->
            <div id="pdfContainer" class="hidden">
                <!-- Breadcrumb Navigation -->
                <nav class="mb-2 sm:mb-3" aria-label="Breadcrumb">
                    <ol id="breadcrumb" class="flex items-center flex-wrap gap-1 text-xs sm:text-sm text-gray-600">
                        <li class="flex items-center">
                            <a href="#" id="breadcrumbHome" class="hover:text-blue-600 hover:underline transition-colors">Home</a>
                        </li>
                    </ol>
                </nav>
                
                <!-- PDF Controls Wrapper -->
                <div class="pdf-controls-wrapper">
                    <!-- PDF Controls -->
                    <div class="bg-white dark:bg-gray-800 rounded-t-lg shadow-lg p-2 sm:p-3 md:p-4 sticky top-14 z-30 border-b border-gray-100 dark:border-gray-700">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 md:gap-4">
                            <div class="flex items-center gap-2 min-w-0 flex-1">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 text-red-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                                </svg>
                                <h3 id="pdfTitle" class="text-sm sm:text-base md:text-lg font-semibold text-gray-700 dark:text-gray-200 truncate max-w-[calc(100%-8rem)] sm:max-w-[calc(100%-6rem)]"></h3>
                                <button id="favoritePdf" class="flex-shrink-0 text-gray-400 hover:text-yellow-500 active:text-yellow-600 dark:active:text-yellow-400 transition-colors p-2 -m-1 min-h-[44px] min-w-[44px] flex items-center justify-center" aria-label="Add to favorites" title="Add to favorites">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="flex items-center gap-2 flex-wrap">
                                <!-- Zoom Controls - Visible on all screens -->
                                <div class="flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg px-2 py-1">
                                    <button id="zoomOut" class="hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 dark:active:bg-gray-500 p-1.5 rounded transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center text-gray-600 dark:text-gray-300" aria-label="Zoom out" title="Zoom out">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-6" />
                                        </svg>
                                    </button>
                                    <span id="zoomLevel" class="text-xs font-medium min-w-[3rem] text-center text-gray-700 dark:text-gray-200">100%</span>
                                    <button id="zoomIn" class="hover:bg-gray-200 dark:hover:bg-gray-600 active:bg-gray-300 dark:active:bg-gray-500 p-1.5 rounded transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center text-gray-600 dark:text-gray-300" aria-label="Zoom in" title="Zoom in">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM10.5 7.5v6m3-3h-6" />
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Print Button -->
                                <button id="printPdf" class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 px-3 sm:px-3 py-2.5 sm:py-2 rounded-lg flex items-center gap-1 transition-all text-gray-700 dark:text-gray-200 text-xs sm:text-sm min-h-[44px]" aria-label="Print PDF" title="Print PDF">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z" />
                                    </svg>
                                    <span class="hidden md:inline">Print</span>
                                </button>
                                
                                <!-- Copy Link Button -->
                                <button id="copyLinkBtn" class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 px-3 sm:px-3 py-2.5 sm:py-2 rounded-lg flex items-center gap-1 transition-all text-gray-700 dark:text-gray-200 text-xs sm:text-sm min-h-[44px]" aria-label="Copy link to clipboard" title="Copy link to clipboard">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244" />
                                    </svg>
                                    <span class="hidden md:inline">Copy Link</span>
                                </button>
                                
                                <!-- Fullscreen Toggle -->
                                <button id="fullscreenToggle" class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 px-3 sm:px-3 py-2.5 sm:py-2 rounded-lg flex items-center gap-1 transition-all text-gray-700 dark:text-gray-200 text-xs sm:text-sm min-h-[44px]" aria-label="Toggle fullscreen" title="Toggle fullscreen">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" />
                                    </svg>
                                    <span class="hidden md:inline">Fullscreen</span>
                                </button>
                                
                                <!-- Download Button -->
                                <a id="downloadPdf" href="#" download class="bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white px-3 sm:px-3 md:px-4 py-2.5 sm:py-2 rounded-lg flex items-center gap-1 sm:gap-2 transition-all text-xs sm:text-sm min-h-[44px] shadow-sm hover:shadow">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
                                    </svg>
                                    <span class="hidden sm:inline">Download</span>
                                </a>
                                
                                <!-- Open in New Tab -->
                                <a id="openInNewTab" href="#" target="_blank" rel="noopener noreferrer" class="bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 px-3 sm:px-3 md:px-4 py-2.5 sm:py-2 rounded-lg flex items-center gap-1 sm:gap-2 transition-all text-gray-700 dark:text-gray-200 text-xs sm:text-sm min-h-[44px]">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
                                    </svg>
                                    <span class="hidden sm:inline">New Tab</span>
                                </a>
                            </div>
                        </div>
                        
                        <!-- Page Navigation for Canvas Mode -->
                        <div id="pageNavigation" class="hidden mt-2 sm:mt-3 flex items-center justify-center gap-3 border-t border-gray-200 dark:border-gray-600 pt-2 sm:pt-3">
                            <button id="prevPage" class="bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center shadow-sm" aria-label="Previous page" title="Previous page">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.75 19.5L8.25 12l7.5-7.5" />
                                </svg>
                            </button>
                            <span id="pageInfo" class="text-sm sm:text-base text-gray-600 dark:text-gray-300 font-medium px-2">Page <span id="pageNum">1</span> of <span id="pageCount">1</span></span>
                            <button id="nextPage" class="bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center shadow-sm" aria-label="Next page" title="Next page">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <!-- PDF Container -->
                <div id="pdfIframeContainer" class="pdf-iframe-container">
                    <!-- Native PDF viewer using object tag (works on desktop) -->
                    <object id="pdfViewer" type="application/pdf" width="100%" height="100%" style="min-height: calc(100vh - 10rem);">
                        <iframe id="pdfViewerFallback" title="PDF Viewer" width="100%" height="100%" style="min-height: calc(100vh - 10rem);"></iframe>
                    </object>
                    <!-- PDF.js canvas rendering for mobile devices -->
                    <div id="pdfCanvasContainer" class="hidden"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="w-full text-center px-4 sm:px-6">
            <div class="flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 mb-4">
                <div class="flex items-center gap-2">
                    <img src="https://res.cloudinary.com/dkj22lm1g/image/upload/w_40,h_40,c_fill/v1768415117/BIT_Repository_xropb0.jpg" alt="BIT Repository Logo" class="h-8 w-8 rounded-lg object-cover">
                    <span class="font-semibold text-white">BIT Repository</span>
                </div>
                <div class="hidden sm:block text-gray-500">|</div>
                <p class="text-sm text-gray-300">Bachelor of Information Technology Course Materials</p>
            </div>
            <div class="flex flex-wrap items-center justify-center gap-3 sm:gap-4 mb-4 text-sm">
                <a href="https://github.com/AshenWijesingha/BIT" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 hover:text-blue-400 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    GitHub
                </a>
                <button id="footerHelpBtn" class="flex items-center gap-1.5 hover:text-blue-400 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
                    </svg>
                    Help
                </button>
                <span class="flex items-center gap-1.5 text-gray-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Press <span class="kbd mx-1">?</span> for shortcuts
                </span>
            </div>
            <div class="border-t border-gray-700 pt-4">
                <p class="text-sm text-gray-400 mb-2"> 2026 BIT Repository. Educational materials for the BIT program.</p>
                <p class="text-sm text-gray-400 mb-2">Made with  for students</p>
                <p class="text-xs text-gray-500" id="appVersion">Version 2.1.0</p>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button id="scrollToTop" class="scroll-to-top" aria-label="Scroll to top" title="Scroll to top">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.5 10.5L12 3m0 0l7.5 7.5M12 3v18" />
        </svg>
    </button>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container" aria-live="polite"></div>

    <!-- Help/Keyboard Shortcuts Modal -->
    <div id="helpModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="helpModalTitle">
        <div class="modal-content">
            <div class="p-4 sm:p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 id="helpModalTitle" class="text-xl font-bold text-gray-800 dark:text-gray-100">Help & Keyboard Shortcuts</h2>
                    <button id="closeHelpModal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors p-2 -m-1 min-h-[44px] min-w-[44px] flex items-center justify-center" aria-label="Close modal">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                
                <div class="space-y-6">
                    <!-- About Section -->
                    <div>
                        <h3 class="font-semibold text-gray-700 dark:text-gray-200 mb-2 flex items-center gap-2">
                            <img src="https://res.cloudinary.com/dkj22lm1g/image/upload/w_24,h_24,c_fill/v1768415117/BIT_Repository_xropb0.jpg" alt="BIT Repository Logo" class="h-5 w-5 rounded object-cover" role="presentation"> About BIT Repository
                        </h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400">
                            This is a PDF repository for Bachelor of Information Technology (BIT) course materials. 
                            Browse, search, and view PDF files from various semesters and subjects.
                        </p>
                    </div>
                    
                    <!-- Keyboard Shortcuts -->
                    <div>
                        <h3 class="font-semibold text-gray-700 dark:text-gray-200 mb-3 flex items-center gap-2">
                            <span></span> Keyboard Shortcuts
                        </h3>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded p-2">
                                <span class="text-gray-600 dark:text-gray-300">Show help</span>
                                <kbd class="kbd">?</kbd>
                            </div>
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded p-2">
                                <span class="text-gray-600 dark:text-gray-300">Search files</span>
                                <div><kbd class="kbd">Ctrl</kbd> + <kbd class="kbd">F</kbd></div>
                            </div>
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded p-2">
                                <span class="text-gray-600 dark:text-gray-300">Zoom in</span>
                                <div><kbd class="kbd">Ctrl</kbd> + <kbd class="kbd">+</kbd></div>
                            </div>
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded p-2">
                                <span class="text-gray-600 dark:text-gray-300">Zoom out</span>
                                <div><kbd class="kbd">Ctrl</kbd> + <kbd class="kbd">-</kbd></div>
                            </div>
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded p-2">
                                <span class="text-gray-600 dark:text-gray-300">Reset zoom</span>
                                <div><kbd class="kbd">Ctrl</kbd> + <kbd class="kbd">0</kbd></div>
                            </div>
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded p-2">
                                <span class="text-gray-600 dark:text-gray-300">Previous page</span>
                                <kbd class="kbd"></kbd>
                            </div>
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded p-2">
                                <span class="text-gray-600 dark:text-gray-300">Next page</span>
                                <kbd class="kbd"></kbd>
                            </div>
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 rounded p-2">
                                <span class="text-gray-600 dark:text-gray-300">Close modal</span>
                                <kbd class="kbd">Esc</kbd>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Features -->
                    <div>
                        <h3 class="font-semibold text-gray-700 dark:text-gray-200 mb-2 flex items-center gap-2">
                            <span></span> Features
                        </h3>
                        <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
                            <li class="flex items-center gap-2"><span></span> Dark mode support</li>
                            <li class="flex items-center gap-2"><span></span> Favorite PDFs for quick access</li>
                            <li class="flex items-center gap-2"><span></span> Search through all files</li>
                            <li class="flex items-center gap-2"><span></span> Mobile-responsive design</li>
                            <li class="flex items-center gap-2"><span></span> Share links to specific PDFs</li>
                            <li class="flex items-center gap-2"><span></span> Print PDFs directly</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-200 dark:border-gray-600">
                    <button id="closeHelpModalFooterBtn" class="w-full bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white py-3 px-4 rounded-lg font-medium transition-colors min-h-[44px]">
                        Got it!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay for mobile sidebar -->
    <div id="sidebarOverlay" class="sidebar-overlay hidden lg:hidden"></div>

    <script>
        /**
         * ============================================================================
         * BIT REPOSITORY - PDF VIEWER APPLICATION
         * ============================================================================
         * 
         * A comprehensive web-based PDF viewer for Bachelor of Information Technology
         * course materials. This application provides a modern, responsive interface
         * for browsing and viewing PDF files organized by semester and subject.
         * 
         * KEY FEATURES:
         * - Dynamic file tree navigation with search functionality
         * - PDF viewing using native viewers (desktop) or PDF.js (mobile)
         * - Dark mode support with persistent preferences
         * - Favorites and recent files tracking
         * - Responsive design optimized for mobile devices
         * - Keyboard shortcuts for power users
         * - Deep linking support via URL parameters
         * 
         * SECURITY FEATURES:
         * - Content Security Policy (CSP) headers
         * - XSS prevention using DOM API instead of innerHTML
         * - Input validation and sanitization
         * - Safe localStorage operations
         * 
         * BROWSER SUPPORT:
         * - Chrome/Edge (recommended)
         * - Firefox
         * - Safari (including iOS)
         * - Mobile browsers (Chrome Mobile, Safari Mobile, Samsung Internet)
         * 
         * @author BIT Repository
         * @version 2.1.0
         * @license Educational Use
         * ============================================================================
         */
        
        /** @constant {string} APP_VERSION - Application version number */
        const APP_VERSION = '2.1.0';
        
        // Configure PDF.js worker - Must be set before any PDF loading
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        }
        
        /**
         * ============================================================================
         * CONFIGURATION CONSTANTS
         * ============================================================================
         * These constants define the behavior and limits of the application.
         * Modify these values to customize the application behavior.
         */
        
        /** @constant {number} PDF_LOAD_TIMEOUT_MS - Fallback timeout for PDF loading in milliseconds */
        const PDF_LOAD_TIMEOUT_MS = 3000;
        
        /** @constant {number} INDENT_SIZE_PX - Indentation for nested sidebar items in pixels */
        const INDENT_SIZE_PX = 12;
        
        /** @constant {string} PDF_VIEW_MODE - Default PDF view mode fragment for native viewers */
        const PDF_VIEW_MODE = '#view=FitH';
        
        /** @constant {number} CANVAS_CONTAINER_PADDING - Padding for canvas container (2 * 1rem) in pixels */
        const CANVAS_CONTAINER_PADDING = 32;
        
        /** @constant {number} MIN_ZOOM - Minimum zoom level (50%) */
        const MIN_ZOOM = 0.5;
        
        /** @constant {number} MAX_ZOOM - Maximum zoom level (300%) */
        const MAX_ZOOM = 3.0;
        
        /** @constant {number} MAX_RECENT_FILES - Maximum number of recent files to track */
        const MAX_RECENT_FILES = 10;
        
        /** @constant {number} TOAST_DURATION_MS - Toast notification duration (5s for accessibility) */
        const TOAST_DURATION_MS = 5000;
        
        /** @constant {number} MIN_MOBILE_PDF_WIDTH - Minimum PDF width on mobile devices in pixels */
        const MIN_MOBILE_PDF_WIDTH = 280;
        
        /** @constant {number} MOBILE_EDGE_MARGIN - Additional margin for mobile to prevent edge overflow in pixels */
        const MOBILE_EDGE_MARGIN = 8;
        
        /** @constant {number} MAX_MOBILE_DEVICE_PIXEL_RATIO - Maximum device pixel ratio for mobile (for performance) */
        const MAX_MOBILE_DEVICE_PIXEL_RATIO = 2;
        
        /** @constant {number} RESIZE_DEBOUNCE_MS - Debounce delay for resize events in milliseconds */
        const RESIZE_DEBOUNCE_MS = 300;
        
        /** @constant {number} MAX_FILE_LOAD_RETRIES - Maximum number of retries for loading file structure */
        const MAX_FILE_LOAD_RETRIES = 3;
        
        /** @constant {number} SEARCH_DEBOUNCE_MS - Debounce delay for search input in milliseconds */
        const SEARCH_DEBOUNCE_MS = 300;

        /**
         * ============================================================================
         * APPLICATION STATE
         * ============================================================================
         * Global state variables that track the current state of the application.
         * These are initialized from localStorage where applicable.
         */
        
        /**
         * Object containing the PDF file structure loaded from files.json
         * @type {Object.<string, (Array<string>|Object)>}
         */
        let pdfFiles = {};
        
        /**
         * Total count of PDF files in the repository
         * @type {number}
         */
        let totalFileCount = 0;
        
        /**
         * Counter for file load retry attempts
         * @type {number}
         */
        let fileLoadRetryCount = 0;

        /**
         * Current PDF file path being displayed
         * @type {string}
         */
        let currentPdfPath = '';
        
        /**
         * PDF.js document instance for the currently loaded PDF
         * @type {PDFDocumentProxy|null}
         */
        let pdfDoc = null;
        
        /**
         * Flag indicating if PDF.js canvas renderer is being used (true for mobile)
         * @type {boolean}
         */
        let usingCanvasRenderer = false;
        
        /**
         * Current zoom level for PDF viewing (1.0 = 100%)
         * @type {number}
         */
        let currentZoom = 1.0;
        
        /**
         * Current page number being viewed in canvas mode
         * @type {number}
         */
        let currentPage = 1;
        
        /**
         * Array of favorited PDF file paths
         * Persisted to localStorage under key 'pdfFavorites'
         * @type {Array<string>}
         */
        let favorites = [];
        
        /**
         * Array of recently viewed PDF file paths
         * Persisted to localStorage under key 'pdfRecentFiles'
         * @type {Array<string>}
         */
        let recentFiles = [];
        
        /**
         * Flag indicating if dark mode is enabled
         * Persisted to localStorage under key 'darkMode'
         * @type {boolean}
         */
        let isDarkMode = false;
        
        /**
         * Flag indicating if sidebar is minimized (desktop only)
         * Persisted to localStorage under key 'sidebarMinimized'
         * @type {boolean}
         */
        let isSidebarMinimized = false;
        
        /**
         * AbortController for cancelling in-progress PDF loading operations
         * Used to prevent race conditions when switching between PDFs quickly
         * @type {AbortController|null}
         */
        let currentPdfLoadController = null;
        
        /**
         * ============================================================================
         * LOCAL STORAGE INITIALIZATION
         * ============================================================================
         * Load persisted user preferences from localStorage with error handling
         */
        
        try {
            favorites = JSON.parse(localStorage.getItem('pdfFavorites') || '[]');
            // Validate that it's an array
            if (!Array.isArray(favorites)) favorites = [];
        } catch (e) {
            console.error('Failed to parse favorites from localStorage:', e);
            favorites = [];
            localStorage.removeItem('pdfFavorites');
        }
        
        try {
            recentFiles = JSON.parse(localStorage.getItem('pdfRecentFiles') || '[]');
            // Validate that it's an array
            if (!Array.isArray(recentFiles)) recentFiles = [];
        } catch (e) {
            console.error('Failed to parse recent files from localStorage:', e);
            recentFiles = [];
            localStorage.removeItem('pdfRecentFiles');
        }
        
        try {
            isDarkMode = localStorage.getItem('darkMode') === 'true';
        } catch (e) {
            console.error('Failed to access dark mode from localStorage:', e);
            isDarkMode = false;
        }
        
        try {
            isSidebarMinimized = localStorage.getItem('sidebarMinimized') === 'true';
        } catch (e) {
            console.error('Failed to access sidebar state from localStorage:', e);
            isSidebarMinimized = false;
        }
        
        /**
         * ============================================================================
         * DOM ELEMENT REFERENCES
         * ============================================================================
         * Cache DOM element references for better performance and cleaner code
         */
        const fileTree = document.getElementById('fileTree');
        const welcomeMessage = document.getElementById('welcomeMessage');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const pdfContainer = document.getElementById('pdfContainer');
        const pdfTitle = document.getElementById('pdfTitle');
        const downloadPdf = document.getElementById('downloadPdf');
        const openInNewTab = document.getElementById('openInNewTab');
        const pdfViewer = document.getElementById('pdfViewer');
        const pdfViewerFallback = document.getElementById('pdfViewerFallback');
        const pdfCanvasContainer = document.getElementById('pdfCanvasContainer');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const searchInput = document.getElementById('searchInput');
        const breadcrumb = document.getElementById('breadcrumb');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const darkModeIcon = document.getElementById('darkModeIcon');
        const favoritePdf = document.getElementById('favoritePdf');
        const fullscreenToggle = document.getElementById('fullscreenToggle');
        const zoomIn = document.getElementById('zoomIn');
        const zoomOut = document.getElementById('zoomOut');
        const zoomLevel = document.getElementById('zoomLevel');
        const pageNavigation = document.getElementById('pageNavigation');
        const prevPage = document.getElementById('prevPage');
        const nextPage = document.getElementById('nextPage');
        const pageNum = document.getElementById('pageNum');
        const pageCount = document.getElementById('pageCount');
        const scrollToTopBtn = document.getElementById('scrollToTop');
        const toastContainer = document.getElementById('toastContainer');
        const helpModal = document.getElementById('helpModal');
        const helpButton = document.getElementById('helpButton');
        const closeHelpModalBtn = document.getElementById('closeHelpModal');
        const expandAllBtn = document.getElementById('expandAllBtn');
        const collapseAllBtn = document.getElementById('collapseAllBtn');
        const fileCountEl = document.getElementById('fileCount');
        const favoritesSection = document.getElementById('favoritesSection');
        const favoritesList = document.getElementById('favoritesList');
        const recentSection = document.getElementById('recentSection');
        const recentList = document.getElementById('recentList');
        const clearFavoritesBtn = document.getElementById('clearFavorites');
        const clearRecentBtn = document.getElementById('clearRecent');
        const printPdfBtn = document.getElementById('printPdf');
        const copyLinkBtn = document.getElementById('copyLinkBtn');
        const minimizeSidebarBtn = document.getElementById('minimizeSidebar');
        const mainContent = document.getElementById('main-content');
        const footer = document.querySelector('.footer');
        
        // Validate critical DOM elements exist
        const criticalElements = {
            fileTree, welcomeMessage, loadingIndicator, pdfContainer,
            sidebar, toastContainer
        };
        
        for (const [name, element] of Object.entries(criticalElements)) {
            if (!element) {
                console.error(`Critical DOM element missing: ${name}`);
                // Create error message safely without innerHTML
                const errorDiv = document.createElement('div');
                errorDiv.style.padding = '2rem';
                errorDiv.style.textAlign = 'center';
                errorDiv.style.color = 'red';
                
                const h1 = document.createElement('h1');
                h1.textContent = 'Application Error';
                
                const p1 = document.createElement('p');
                p1.textContent = `Critical page element missing: ${name}`;
                
                const p2 = document.createElement('p');
                p2.textContent = 'Please refresh the page or contact support.';
                
                errorDiv.appendChild(h1);
                errorDiv.appendChild(p1);
                errorDiv.appendChild(p2);
                
                // Create error overlay instead of clearing body to avoid destroying state
                errorDiv.style.cssText = 'position: fixed; inset: 0; z-index: 9999; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.9);';
                document.body.appendChild(errorDiv);
                throw new Error(`Critical DOM element missing: ${name}`);
            }
        }
        
        // Configure PDF.js worker
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        }
        
        /**
         * ============================================================================
         * UTILITY FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Detects if the current device likely supports native PDF viewing.
         * Mobile devices typically require PDF.js canvas rendering for proper display.
         * 
         * @function supportsNativePDFViewing
         * @returns {boolean} True if native PDF viewing is supported (typically desktop browsers)
         * 
         * @example
         * if (supportsNativePDFViewing()) {
         *     // Use native PDF viewer (iframe/object tag)
         * } else {
         *     // Use PDF.js canvas rendering
         * }
         */
        function supportsNativePDFViewing() {
            // Mobile devices typically don't support inline PDF viewing
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            return !isMobile;
        }
        
        /**
         * Displays a toast notification to the user.
         * Uses secure DOM API to prevent XSS attacks.
         * Toast automatically dismisses after TOAST_DURATION_MS milliseconds.
         * 
         * @function showToast
         * @param {string} message - The message to display in the toast
         * @param {('info'|'success'|'error')} [type='info'] - The type of toast which determines styling and icon
         * 
         * @example
         * showToast('File saved successfully', 'success');
         * showToast('An error occurred', 'error');
         * showToast('Loading PDF...', 'info');
         */
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            // Create SVG icon safely
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('class', 'h-5 w-5 flex-shrink-0');
            svg.setAttribute('fill', 'none');
            svg.setAttribute('viewBox', '0 0 24 24');
            svg.setAttribute('stroke', 'currentColor');
            
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('stroke-linecap', 'round');
            path.setAttribute('stroke-linejoin', 'round');
            path.setAttribute('stroke-width', '2');
            
            // Set path based on type
            if (type === 'success') {
                path.setAttribute('d', 'M5 13l4 4L19 7');
            } else if (type === 'error') {
                path.setAttribute('d', 'M6 18L18 6M6 6l12 12');
            } else {
                path.setAttribute('d', 'M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z');
            }
            
            svg.appendChild(path);
            
            // Create message span safely using textContent
            const span = document.createElement('span');
            span.className = 'text-sm';
            span.textContent = message; // Safe - prevents XSS
            
            toast.appendChild(svg);
            toast.appendChild(span);
            toastContainer.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('fade-out');
                setTimeout(() => toast.remove(), 300);
            }, TOAST_DURATION_MS);
        }
        
        /**
         * Safely stores a value in localStorage with error handling.
         * Handles quota exceeded errors and other storage failures gracefully.
         * 
         * @function safeSetLocalStorage
         * @param {string} key - The localStorage key to set
         * @param {*} value - The value to store (will be JSON stringified)
         * @returns {boolean} True if the operation succeeded, false otherwise
         * 
         * @example
         * safeSetLocalStorage('pdfFavorites', ['file1.pdf', 'file2.pdf']);
         * safeSetLocalStorage('darkMode', true);
         */
        function safeSetLocalStorage(key, value) {
            try {
                localStorage.setItem(key, JSON.stringify(value));
                return true;
            } catch (e) {
                console.error(`Failed to save to localStorage (${key}):`, e);
                if (e.name === 'QuotaExceededError') {
                    showToast('Storage limit reached. Some data may not be saved.', 'error');
                }
                return false;
            }
        }
        
        /**
         * ============================================================================
         * HELP MODAL FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Opens the help modal dialog.
         * Prevents body scrolling while modal is open.
         * 
         * @function openHelpModal
         */
        function openHelpModal() {
            helpModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        /**
         * Closes the help modal dialog.
         * Restores body scrolling.
         * 
         * @function closeHelpModal
         */
        function closeHelpModal() {
            helpModal.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        helpButton.addEventListener('click', openHelpModal);
        closeHelpModalBtn.addEventListener('click', closeHelpModal);
        helpModal.addEventListener('click', (e) => {
            if (e.target === helpModal) closeHelpModal();
        });
        
        // Additional button event listeners for inline handlers
        const browseFilesBtn = document.getElementById('browseFilesBtn');
        const viewHelpBtn = document.getElementById('viewHelpBtn');
        const breadcrumbHome = document.getElementById('breadcrumbHome');
        const footerHelpBtn = document.getElementById('footerHelpBtn');
        const closeHelpModalFooterBtn = document.getElementById('closeHelpModalFooterBtn');
        
        if (browseFilesBtn) {
            browseFilesBtn.addEventListener('click', () => {
                const toggleSidebarBtn = document.getElementById('toggleSidebar');
                if (toggleSidebarBtn) toggleSidebarBtn.click();
            });
        }
        
        if (viewHelpBtn) {
            viewHelpBtn.addEventListener('click', openHelpModal);
        }
        
        if (breadcrumbHome) {
            breadcrumbHome.addEventListener('click', (e) => {
                e.preventDefault();
            });
        }
        
        if (footerHelpBtn) {
            footerHelpBtn.addEventListener('click', openHelpModal);
        }
        
        if (closeHelpModalFooterBtn) {
            closeHelpModalFooterBtn.addEventListener('click', closeHelpModal);
        }
        
        /**
         * ============================================================================
         * UI INTERACTION FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Updates the visibility of the scroll-to-top button based on scroll position.
         * Shows the button when the user has scrolled more than 300 pixels.
         * 
         * @function updateScrollToTopVisibility
         */
        function updateScrollToTopVisibility() {
            const scrollY = window.scrollY || document.documentElement.scrollTop;
            if (scrollY > 300) {
                scrollToTopBtn.classList.add('visible');
            } else {
                scrollToTopBtn.classList.remove('visible');
            }
        }
        
        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        window.addEventListener('scroll', updateScrollToTopVisibility);
        
        // Expand all folders in file tree
        expandAllBtn.addEventListener('click', () => {
            fileTree.querySelectorAll('.folder-content').forEach(content => {
                content.classList.add('expanded');
            });
            fileTree.querySelectorAll('.chevron').forEach(chevron => {
                chevron.classList.add('rotate-90');
            });
            showToast('All folders expanded', 'info');
        });
        
        // Collapse all folders in file tree
        collapseAllBtn.addEventListener('click', () => {
            fileTree.querySelectorAll('.folder-content').forEach(content => {
                content.classList.remove('expanded');
            });
            fileTree.querySelectorAll('.chevron').forEach(chevron => {
                chevron.classList.remove('rotate-90');
            });
            showToast('All folders collapsed', 'info');
        });
        
        /**
         * ============================================================================
         * FAVORITES MANAGEMENT FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Updates the favorites section in the sidebar.
         * Filters out invalid paths and renders the favorite items.
         * Uses secure DOM API to prevent XSS attacks.
         * 
         * @function updateFavoritesSection
         */
        function updateFavoritesSection() {
            // Filter out invalid paths
            favorites = favorites.filter(path => isValidPdfPath(path));
            
            if (favorites.length === 0) {
                favoritesSection.classList.add('hidden');
                return;
            }
            
            favoritesSection.classList.remove('hidden');
            favoritesList.innerHTML = '';
            
            favorites.forEach(filePath => {
                const fileName = filePath.split('/').pop().replace('.pdf', '');
                const item = document.createElement('div');
                item.className = 'flex items-center gap-2 p-1.5 rounded cursor-pointer hover:bg-gray-100 transition-colors text-sm';
                
                // Create star icon safely (SF Symbols style)
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('class', 'h-4 w-4 text-yellow-500 flex-shrink-0');
                svg.setAttribute('fill', 'currentColor');
                svg.setAttribute('viewBox', '0 0 24 24');
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('fill-rule', 'evenodd');
                path.setAttribute('d', 'M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z');
                path.setAttribute('clip-rule', 'evenodd');
                svg.appendChild(path);
                
                // Create text span safely using textContent
                const span = document.createElement('span');
                span.className = 'truncate text-gray-600';
                span.textContent = fileName; // Safe - prevents XSS
                span.title = fileName; // Safe - browser sanitizes attributes
                
                item.appendChild(svg);
                item.appendChild(span);
                item.addEventListener('click', () => loadPdf(filePath));
                favoritesList.appendChild(item);
            });
        }
        
        /**
         * ============================================================================
         * RECENT FILES MANAGEMENT FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Updates the recent files section in the sidebar.
         * Displays the 5 most recently viewed PDFs.
         * Filters out invalid paths and uses secure DOM API.
         * 
         * @function updateRecentSection
         */
        function updateRecentSection() {
            // Filter out invalid paths
            recentFiles = recentFiles.filter(path => isValidPdfPath(path));
            
            if (recentFiles.length === 0) {
                recentSection.classList.add('hidden');
                return;
            }
            
            recentSection.classList.remove('hidden');
            recentList.innerHTML = '';
            
            recentFiles.slice(0, 5).forEach(filePath => {
                const fileName = filePath.split('/').pop().replace('.pdf', '');
                const item = document.createElement('div');
                item.className = 'flex items-center gap-2 p-1.5 rounded cursor-pointer hover:bg-gray-100 transition-colors text-sm';
                
                // Create clock icon safely (SF Symbols style)
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('class', 'h-4 w-4 text-gray-400 flex-shrink-0');
                svg.setAttribute('fill', 'none');
                svg.setAttribute('viewBox', '0 0 24 24');
                svg.setAttribute('stroke', 'currentColor');
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('stroke-linecap', 'round');
                path.setAttribute('stroke-linejoin', 'round');
                path.setAttribute('stroke-width', '1.5');
                path.setAttribute('d', 'M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z');
                svg.appendChild(path);
                
                // Create text span safely using textContent
                const span = document.createElement('span');
                span.className = 'truncate text-gray-600';
                span.textContent = fileName; // Safe - prevents XSS
                span.title = fileName; // Safe - browser sanitizes attributes
                
                item.appendChild(svg);
                item.appendChild(span);
                item.addEventListener('click', () => loadPdf(filePath));
                recentList.appendChild(item);
            });
        }
        
        // Clear favorites button event handler
        clearFavoritesBtn.addEventListener('click', () => {
            favorites = [];
            safeSetLocalStorage('pdfFavorites', favorites);
            updateFavoritesSection();
            showToast('Favorites cleared', 'success');
        });
        
        // Clear recent files button event handler
        clearRecentBtn.addEventListener('click', () => {
            recentFiles = [];
            safeSetLocalStorage('pdfRecentFiles', recentFiles);
            updateRecentSection();
            showToast('History cleared', 'success');
        });
        
        // Print PDF button event handler - Opens PDF in new window for printing
        printPdfBtn.addEventListener('click', () => {
            if (currentPdfPath && isValidPdfPath(currentPdfPath)) {
                const printWindow = window.open(encodeURI(currentPdfPath), '_blank');
                if (printWindow) {
                    printWindow.onload = () => {
                        printWindow.print();
                    };
                    showToast('Opening print dialog...', 'info');
                }
            }
        });
        
        // Copy link to clipboard - Modern secure implementation
        copyLinkBtn.addEventListener('click', async () => {
            if (currentPdfPath && isValidPdfPath(currentPdfPath)) {
                const url = window.location.origin + window.location.pathname + '?pdf=' + encodeURIComponent(currentPdfPath);
                
                // Check if clipboard API is available
                if (!navigator.clipboard) {
                    // Show error message if clipboard API not available (e.g., non-HTTPS)
                    showToast('Copy to clipboard requires HTTPS or localhost. Please copy manually.', 'error');
                    console.error('Clipboard API not available. URL:', url);
                    return;
                }
                
                try {
                    await navigator.clipboard.writeText(url);
                    showToast('Link copied to clipboard!', 'success');
                } catch (err) {
                    console.error('Clipboard API failed:', err);
                    // Show the URL so user can copy manually
                    showToast('Failed to copy. Please copy the link from browser address bar.', 'error');
                }
            }
        });
        
        /**
         * ============================================================================
         * FILE STRUCTURE HELPER FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Recursively counts the total number of PDF files in the file structure.
         * 
         * @function countFilesInStructure
         * @param {Object|Array} obj - The file structure object or array to count
         * @returns {number} The total count of PDF files
         * 
         * @example
         * const count = countFilesInStructure(pdfFiles);
         * console.log(`Found ${count} PDF files`);
         */
        function countFilesInStructure(obj) {
            let count = 0;
            if (Array.isArray(obj)) {
                return obj.length;
            }
            for (const value of Object.values(obj)) {
                if (Array.isArray(value)) {
                    count += value.length;
                } else if (typeof value === 'object') {
                    count += countFilesInStructure(value);
                }
            }
            return count;
        }
        
        /**
         * Validates a PDF file path for security.
         * Prevents XSS attacks and path traversal attempts.
         * 
         * @function isValidPdfPath
         * @param {string} path - The file path to validate
         * @returns {boolean} True if the path is valid and exists in the file structure
         * 
         * @example
         * if (isValidPdfPath('Semester 5/lecture.pdf')) {
         *     loadPdf(path);
         * }
         */
        function isValidPdfPath(path) {
            // Check if path ends with .pdf and doesn't contain malicious characters
            if (!path || typeof path !== 'string') return false;
            if (!path.toLowerCase().endsWith('.pdf')) return false;
            // Prevent path traversal and protocol injection
            if (path.includes('..') || path.includes('://') || path.startsWith('/')) return false;
            // Check if path exists in file structure
            return getAllPdfPaths(pdfFiles).includes(path);
        }
        
        /**
         * Recursively extracts all PDF file paths from the file structure.
         * 
         * @function getAllPdfPaths
         * @param {Object|Array} obj - The file structure object or array
         * @param {Array<string>} [paths=[]] - Accumulator array for paths
         * @returns {Array<string>} Array of all PDF file paths
         * 
         * @example
         * const allPaths = getAllPdfPaths(pdfFiles);
         * console.log(`Found ${allPaths.length} PDF files`);
         */
        function getAllPdfPaths(obj, paths = []) {
            if (Array.isArray(obj)) {
                paths.push(...obj);
            } else if (typeof obj === 'object') {
                for (const value of Object.values(obj)) {
                    getAllPdfPaths(value, paths);
                }
            }
            return paths;
        }
        
        /**
         * ============================================================================
         * LOADING INDICATOR FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Hides the loading indicator overlay.
         * 
         * @function hideLoadingIndicator
         */
        function hideLoadingIndicator() {
            loadingIndicator.classList.add('hidden');
            loadingIndicator.style.display = '';
        }
        
        /**
         * Shows the loading indicator overlay and hides other content.
         * 
         * @function showLoadingIndicator
         */
        function showLoadingIndicator() {
            welcomeMessage.classList.add('hidden');
            pdfContainer.classList.add('hidden');
            loadingIndicator.classList.remove('hidden');
            loadingIndicator.style.display = 'flex';
        }

        /**
         * ============================================================================
         * FILE STRUCTURE LOADING
         * ============================================================================
         */
        
        /**
         * Loads the file structure from files.json.
         * Implements retry mechanism for resilience.
         * After loading, builds the file tree UI and checks for deep links.
         * 
         * @async
         * @function loadFileStructure
         * @throws {Error} If file structure cannot be loaded after maximum retries
         * 
         * @example
         * await loadFileStructure();
         * console.log(`Loaded ${totalFileCount} PDF files`);
         */
        async function loadFileStructure() {
            try {
                const response = await fetch('files.json');
                if (!response.ok) {
                    throw new Error(`Failed to load file structure: ${response.status} ${response.statusText}`);
                }
                pdfFiles = await response.json();
                
                // Validate the structure
                if (!pdfFiles || typeof pdfFiles !== 'object') {
                    throw new Error('Invalid file structure format');
                }
                
                totalFileCount = countFilesInStructure(pdfFiles);
                fileCountEl.textContent = totalFileCount + (totalFileCount === 1 ? ' file' : ' files');
                buildFileTree();
                updateFavoritesSection();
                updateRecentSection();
                
                // Reset retry count on success
                fileLoadRetryCount = 0;
                
                // Check for URL parameter to load specific PDF
                const urlParams = new URLSearchParams(window.location.search);
                const pdfParam = urlParams.get('pdf');
                if (pdfParam) {
                    try {
                        // Validate that the PDF path exists in the file structure
                        const decodedPath = decodeURIComponent(pdfParam);
                        if (isValidPdfPath(decodedPath)) {
                            loadPdf(decodedPath);
                        } else {
                            console.warn('Invalid PDF path in URL parameter:', decodedPath);
                            showToast('Invalid PDF link. Please select a file from the sidebar.', 'error');
                        }
                    } catch (decodeError) {
                        console.error('Error decoding PDF parameter:', decodeError);
                        showToast('Invalid PDF link format.', 'error');
                    }
                }
            } catch (error) {
                console.error('Error loading file structure:', error);
                fileLoadRetryCount++;
                
                // Create error message with retry button (using DOM API to prevent XSS)
                const errorDiv = document.createElement('div');
                errorDiv.className = 'p-4 text-center text-red-500';
                
                // Create error icon
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('class', 'h-12 w-12 mx-auto mb-2');
                svg.setAttribute('fill', 'none');
                svg.setAttribute('viewBox', '0 0 24 24');
                svg.setAttribute('stroke', 'currentColor');
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('stroke-linecap', 'round');
                path.setAttribute('stroke-linejoin', 'round');
                path.setAttribute('stroke-width', '2');
                path.setAttribute('d', 'M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z');
                svg.appendChild(path);
                errorDiv.appendChild(svg);
                
                // Create error message paragraphs
                const p1 = document.createElement('p');
                p1.className = 'text-sm font-medium';
                p1.textContent = 'Failed to load file list';
                errorDiv.appendChild(p1);
                
                const p2 = document.createElement('p');
                p2.className = 'text-xs mt-1';
                // Sanitize error message to prevent XSS
                p2.textContent = error.message || 'Unknown error occurred';
                errorDiv.appendChild(p2);
                
                // Add retry button if we haven't exceeded max retries
                if (fileLoadRetryCount < MAX_FILE_LOAD_RETRIES) {
                    const retryBtn = document.createElement('button');
                    retryBtn.className = 'mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm';
                    retryBtn.textContent = `Retry (${fileLoadRetryCount}/${MAX_FILE_LOAD_RETRIES})`;
                    retryBtn.addEventListener('click', () => {
                        // Clear and show loading message
                        const loadingDiv = document.createElement('div');
                        loadingDiv.className = 'p-4 text-center text-gray-500';
                        const loadingP = document.createElement('p');
                        loadingP.className = 'text-sm';
                        loadingP.textContent = 'Loading files...';
                        loadingDiv.appendChild(loadingP);
                        fileTree.innerHTML = '';
                        fileTree.appendChild(loadingDiv);
                        loadFileStructure();
                    });
                    errorDiv.appendChild(retryBtn);
                } else {
                    const helpText = document.createElement('p');
                    helpText.className = 'text-xs mt-2 text-gray-500';
                    helpText.textContent = 'Please refresh the page or contact support';
                    errorDiv.appendChild(helpText);
                }
                
                // Show error message to user
                fileTree.innerHTML = '';
                fileTree.appendChild(errorDiv);
            }
        }

        /**
         * ============================================================================
         * FILE TREE BUILDING FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Builds the file tree UI from the loaded PDF file structure.
         * Renders folders and files in a hierarchical tree view.
         * 
         * @function buildFileTree
         */
        function buildFileTree() {
            // Remove loading skeleton if present
            const skeleton = document.getElementById('fileTreeSkeleton');
            if (skeleton) {
                skeleton.remove();
            }
            
            fileTree.innerHTML = '';
            
            if (Object.keys(pdfFiles).length === 0) {
                // Create empty state using secure DOM API
                const emptyState = document.createElement('div');
                emptyState.className = 'error-state';
                
                // Empty state icon
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('fill', 'none');
                svg.setAttribute('viewBox', '0 0 24 24');
                svg.setAttribute('stroke', 'currentColor');
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('stroke-linecap', 'round');
                path.setAttribute('stroke-linejoin', 'round');
                path.setAttribute('stroke-width', '1.5');
                path.setAttribute('d', 'M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z');
                svg.appendChild(path);
                
                const h3 = document.createElement('h3');
                h3.textContent = 'No files found';
                
                const p = document.createElement('p');
                p.textContent = 'Unable to load file structure. Please try refreshing the page.';
                
                const button = document.createElement('button');
                button.textContent = 'Refresh';
                button.addEventListener('click', () => location.reload());
                
                emptyState.appendChild(svg);
                emptyState.appendChild(h3);
                emptyState.appendChild(p);
                emptyState.appendChild(button);
                fileTree.appendChild(emptyState);
                return;
            }
            
            for (const [folder, content] of Object.entries(pdfFiles)) {
                const folderElement = createFolderElement(folder, content);
                fileTree.appendChild(folderElement);
            }
        }

        /**
         * Creates a folder element for the file tree.
         * Handles nested folders and files recursively.
         * Uses secure DOM API to prevent XSS attacks.
         * 
         * @function createFolderElement
         * @param {string} name - The folder name to display
         * @param {Object|Array} content - The folder contents (files or nested folders)
         * @param {number} [level=0] - The nesting level for indentation
         * @returns {HTMLDivElement} The folder container element
         * 
         * @example
         * const folderEl = createFolderElement('Semester 5', { 'Course 1': ['file1.pdf'] }, 0);
         * fileTree.appendChild(folderEl);
         */
        function createFolderElement(name, content, level = 0) {
            const container = document.createElement('div');
            container.className = 'folder-container';
            
            // Folder header - responsive margin calculation with better touch targets
            const header = document.createElement('div');
            header.className = 'flex items-center gap-1 sm:gap-2 p-2 rounded cursor-pointer hover:bg-gray-100 transition-colors';
            header.style.marginLeft = (level * INDENT_SIZE_PX) + 'px';
            header.style.minHeight = '44px'; // Touch target size
            
            // Create folder icon
            const folderIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            folderIcon.setAttribute('class', 'h-5 w-5 text-yellow-500 flex-shrink-0');
            folderIcon.setAttribute('fill', 'none');
            folderIcon.setAttribute('viewBox', '0 0 24 24');
            folderIcon.setAttribute('stroke', 'currentColor');
            const folderPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            folderPath.setAttribute('stroke-linecap', 'round');
            folderPath.setAttribute('stroke-linejoin', 'round');
            folderPath.setAttribute('stroke-width', '1.5');
            folderPath.setAttribute('d', 'M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z');
            folderIcon.appendChild(folderPath);
            
            // Create folder name span
            const nameSpan = document.createElement('span');
            nameSpan.className = 'folder-name text-sm font-medium text-gray-700 flex-1 truncate';
            nameSpan.textContent = name;
            nameSpan.title = name;
            
            // Create chevron icon
            const chevronIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            chevronIcon.setAttribute('class', 'h-4 w-4 text-gray-400 chevron transition-transform flex-shrink-0');
            chevronIcon.setAttribute('fill', 'none');
            chevronIcon.setAttribute('viewBox', '0 0 24 24');
            chevronIcon.setAttribute('stroke', 'currentColor');
            const chevronPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            chevronPath.setAttribute('stroke-linecap', 'round');
            chevronPath.setAttribute('stroke-linejoin', 'round');
            chevronPath.setAttribute('stroke-width', '1.5');
            chevronPath.setAttribute('d', 'M8.25 4.5l7.5 7.5-7.5 7.5');
            chevronIcon.appendChild(chevronPath);
            
            // Assemble header
            header.appendChild(folderIcon);
            header.appendChild(nameSpan);
            header.appendChild(chevronIcon);
            
            // Folder content
            const contentDiv = document.createElement('div');
            contentDiv.className = 'folder-content';
            
            if (Array.isArray(content)) {
                // Simple array of files
                content.forEach(file => {
                    const fileElement = createFileElement(file, level + 1);
                    contentDiv.appendChild(fileElement);
                });
            } else {
                // Object with subfolders and _root files
                if (content._root) {
                    content._root.forEach(file => {
                        const fileElement = createFileElement(file, level + 1);
                        contentDiv.appendChild(fileElement);
                    });
                }
                
                // Subfolders
                for (const [subFolder, subContent] of Object.entries(content)) {
                    if (subFolder !== '_root') {
                        const subFolderElement = createFolderElement(subFolder, subContent, level + 1);
                        contentDiv.appendChild(subFolderElement);
                    }
                }
            }
            
            // Toggle folder expansion
            header.addEventListener('click', () => {
                contentDiv.classList.toggle('expanded');
                header.querySelector('.chevron').classList.toggle('rotate-90');
            });
            
            container.appendChild(header);
            container.appendChild(contentDiv);
            
            return container;
        }

        /**
         * Creates a file element for the file tree sidebar.
         * Uses secure DOM API to prevent XSS attacks.
         * Includes PDF icon and click handler to load the PDF.
         * 
         * @function createFileElement
         * @param {string} filePath - The full path to the PDF file
         * @param {number} level - The nesting level for indentation
         * @returns {HTMLDivElement} The file element with icon and label
         * 
         * @example
         * const fileEl = createFileElement('Semester 5/lecture.pdf', 1);
         * container.appendChild(fileEl);
         */
        function createFileElement(filePath, level) {
            // Safely extract and sanitize file name
            const pathParts = filePath.split('/');
            const fileNameWithExt = pathParts[pathParts.length - 1];
            const fileName = fileNameWithExt.replace('.pdf', '');
            
            // Create element safely to prevent XSS
            const element = document.createElement('div');
            element.className = 'sidebar-item flex items-center gap-1 sm:gap-2 p-2 rounded cursor-pointer hover:bg-gray-100 transition-colors';
            element.style.marginLeft = (level * INDENT_SIZE_PX) + 'px';
            element.style.minHeight = '44px'; // Touch target size
            
            // Create icon
            const icon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            icon.setAttribute('class', 'h-5 w-5 text-red-500 flex-shrink-0');
            icon.setAttribute('fill', 'none');
            icon.setAttribute('viewBox', '0 0 24 24');
            icon.setAttribute('stroke', 'currentColor');
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('stroke-linecap', 'round');
            path.setAttribute('stroke-linejoin', 'round');
            path.setAttribute('stroke-width', '1.5');
            path.setAttribute('d', 'M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z');
            icon.appendChild(path);
            
            // Create text span with safe textContent
            const span = document.createElement('span');
            span.className = 'text-sm text-gray-600 truncate';
            span.textContent = fileName;
            span.title = fileName; // Safe because textContent is used
            
            element.appendChild(icon);
            element.appendChild(span);
            element.dataset.path = filePath;
            element.addEventListener('click', () => loadPdf(filePath));
            
            return element;
        }

        /**
         * ============================================================================
         * PDF RENDERING FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Renders a PDF file using PDF.js canvas rendering.
         * This is the primary method for mobile devices that don't support native PDF viewing.
         * Includes features like:
         * - Abort controller for cancelling in-progress loads
         * - 30-second timeout for failed loads
         * - High-DPI display support
         * - Responsive sizing based on viewport
         * - Memory cleanup for previous documents
         * 
         * @async
         * @function renderPDFWithCanvas
         * @param {string} pdfPath - The encoded URL path to the PDF file
         * @throws {Error} If PDF loading fails, displays error UI with recovery options
         * 
         * @example
         * await renderPDFWithCanvas('Semester%205/lecture.pdf');
         */
        async function renderPDFWithCanvas(pdfPath) {
            // Cancel any previous render in progress
            if (currentPdfLoadController) {
                currentPdfLoadController.abort();
            }
            currentPdfLoadController = new AbortController();
            const signal = currentPdfLoadController.signal;
            
            try {
                // Clean up previous PDF document if exists
                if (pdfDoc) {
                    await pdfDoc.destroy();
                    pdfDoc = null;
                }
                
                pdfCanvasContainer.innerHTML = '<p class="text-white text-center">Loading PDF...</p>';
                
                // Set timeout for PDF loading
                const loadTimeout = setTimeout(() => {
                    if (currentPdfLoadController) {
                        currentPdfLoadController.abort();
                        showToast('PDF loading timeout. Please try again or download the file.', 'error');
                    }
                }, 30000); // 30 second timeout
                
                // Check if aborted before starting
                if (signal.aborted) {
                    clearTimeout(loadTimeout);
                    return;
                }
                
                // Load PDF document with high-quality rendering options
                const loadingTask = pdfjsLib.getDocument({
                    url: pdfPath,
                    // Enable high-quality rendering options
                    disableAutoFetch: false,
                    enableXfa: false // Disable XFA to avoid font loading issues
                });
                pdfDoc = await loadingTask.promise;
                
                clearTimeout(loadTimeout);
                
                // Check if aborted after loading
                if (signal.aborted) {
                    if (pdfDoc) {
                        await pdfDoc.destroy();
                        pdfDoc = null;
                    }
                    return;
                }
                
                // Clear container
                pdfCanvasContainer.innerHTML = '';
                
                // Show page navigation
                pageNavigation.classList.remove('hidden');
                pageCount.textContent = pdfDoc.numPages;
                currentPage = 1;
                updatePageDisplay();
                
                // Get container dimensions for proper scaling
                const container = pdfCanvasContainer;
                
                // For mobile devices, use window.innerWidth for more reliable viewport width
                // This ensures we account for the actual visible area on devices like Samsung S10 5G
                const isMobile = window.innerWidth <= 768;
                let containerWidth;
                
                if (isMobile) {
                    // On mobile, use the visual viewport width for more accurate measurement
                    // This accounts for browser chrome and ensures PDF fits within visible area
                    // Visual Viewport API is supported in modern browsers (Chrome 61+, Safari 13+, Firefox 91+)
                    // Falls back to window.innerWidth for older browsers
                    containerWidth = window.visualViewport ? window.visualViewport.width : window.innerWidth;
                } else {
                    // On desktop, use container's bounding rect
                    const containerRect = container.getBoundingClientRect();
                    containerWidth = containerRect.width > 0 ? containerRect.width : window.innerWidth;
                }
                
                // Account for padding and safe areas on mobile devices
                const containerPadding = isMobile ? 16 : CANVAS_CONTAINER_PADDING;
                // Additional margin for mobile to prevent edge overflow
                const edgeMargin = isMobile ? MOBILE_EDGE_MARGIN : 0;
                const availableWidth = Math.max(containerWidth - containerPadding - edgeMargin, MIN_MOBILE_PDF_WIDTH);
                
                // Get device pixel ratio for high-DPI displays (limit to 2 for performance on mobile)
                const devicePixelRatio = Math.min(window.devicePixelRatio || 1, MAX_MOBILE_DEVICE_PIXEL_RATIO);
                
                // Render all pages
                for (let pageNum = 1; pageNum <= pdfDoc.numPages; pageNum++) {
                    // Check for abort between pages
                    if (signal.aborted) {
                        return;
                    }
                    
                    const page = await pdfDoc.getPage(pageNum);
                    
                    // Create canvas
                    const canvas = document.createElement('canvas');
                    canvas.className = 'pdf-page-canvas';
                    canvas.dataset.pageNum = pageNum;
                    const context = canvas.getContext('2d', { alpha: false });
                    
                    // Calculate scale to fit screen width with zoom
                    const viewport = page.getViewport({ scale: 1 });
                    const scale = (availableWidth / viewport.width) * currentZoom;
                    
                    // Calculate CSS dimensions (actual display size)
                    // Ensure canvas width never exceeds available width to prevent horizontal overflow
                    // This is critical for mobile devices to avoid horizontal scrolling issues
                    const cssWidth = Math.min(Math.round(viewport.width * scale), availableWidth);
                    const cssHeight = Math.round(viewport.height * scale);
                    
                    // Apply device pixel ratio for high-quality rendering on high-DPI displays
                    // This only affects internal canvas resolution, not display size
                    const outputScale = devicePixelRatio;
                    const canvasViewport = page.getViewport({ scale: scale * outputScale });
                    
                    // Set canvas internal dimensions (for rendering at high resolution)
                    canvas.width = canvasViewport.width;
                    canvas.height = canvasViewport.height;
                    
                    // Set CSS dimensions to match the intended display size
                    canvas.style.width = cssWidth + 'px';
                    canvas.style.height = cssHeight + 'px';
                    
                    // Configure canvas context for high-quality rendering
                    context.imageSmoothingEnabled = true;
                    context.imageSmoothingQuality = 'high';
                    
                    // Render page with high-quality settings
                    await page.render({
                        canvasContext: context,
                        viewport: canvasViewport,
                        intent: 'display',
                        renderInteractiveForms: true
                    }).promise;
                    
                    pdfCanvasContainer.appendChild(canvas);
                }
                
                // Hide loading and show container
                hideLoadingIndicator();
                pdfContainer.classList.remove('hidden');
                
            } catch (error) {
                console.error('Error rendering PDF:', error);
                hideLoadingIndicator();
                
                // Create a better error UI with recovery options
                const errorContainer = document.createElement('div');
                errorContainer.className = 'flex flex-col items-center justify-center flex-1 min-h-[500px] error-container';
                
                const errorBox = document.createElement('div');
                errorBox.className = 'bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 sm:p-8 max-w-lg mx-4 border border-gray-100 dark:border-gray-700';
                
                // Error icon
                const iconDiv = document.createElement('div');
                iconDiv.className = 'flex justify-center mb-6';
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.setAttribute('class', 'h-20 w-20 text-red-500');
                svg.setAttribute('fill', 'none');
                svg.setAttribute('viewBox', '0 0 24 24');
                svg.setAttribute('stroke', 'currentColor');
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('stroke-linecap', 'round');
                path.setAttribute('stroke-linejoin', 'round');
                path.setAttribute('stroke-width', '1.5');
                path.setAttribute('d', 'M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z');
                svg.appendChild(path);
                iconDiv.appendChild(svg);
                
                // Title
                const title = document.createElement('h2');
                title.className = 'text-2xl font-bold text-gray-900 dark:text-white mb-4 text-center';
                title.textContent = 'Failed to Load PDF';
                
                // Description
                const desc = document.createElement('p');
                desc.className = 'text-base text-gray-700 dark:text-gray-300 mb-6 text-center';
                desc.textContent = 'The PDF file could not be displayed. This may be due to file corruption, network issues, or browser limitations.';
                
                // Buttons container
                const buttonsDiv = document.createElement('div');
                buttonsDiv.className = 'flex flex-col gap-3';
                
                // Download button
                const downloadBtn = document.createElement('a');
                downloadBtn.href = encodeURI(currentPdfPath);
                downloadBtn.download = '';
                downloadBtn.className = 'bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 w-full text-center shadow-lg hover:shadow-xl';
                downloadBtn.textContent = 'Download PDF';
                
                // Open in new tab button
                const openBtn = document.createElement('a');
                openBtn.href = encodeURI(currentPdfPath);
                openBtn.target = '_blank';
                openBtn.rel = 'noopener noreferrer';
                openBtn.className = 'bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 w-full text-center shadow-lg hover:shadow-xl';
                openBtn.textContent = 'Open in New Tab';
                
                // Refresh button
                const refreshBtn = document.createElement('button');
                refreshBtn.className = 'bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 px-6 py-3 rounded-xl font-semibold transition-all duration-200 w-full text-center';
                refreshBtn.textContent = 'Refresh Page';
                refreshBtn.addEventListener('click', () => {
                    location.reload();
                });
                
                buttonsDiv.appendChild(downloadBtn);
                buttonsDiv.appendChild(openBtn);
                buttonsDiv.appendChild(refreshBtn);
                
                errorBox.appendChild(iconDiv);
                errorBox.appendChild(title);
                errorBox.appendChild(desc);
                errorBox.appendChild(buttonsDiv);
                errorContainer.appendChild(errorBox);
                
                // Show error UI
                welcomeMessage.classList.add('hidden');
                pdfContainer.classList.add('hidden');
                const existingError = mainContent.querySelector('.error-container');
                if (existingError) {
                    existingError.remove();
                }
                mainContent.appendChild(errorContainer);
                
                showToast('Failed to load PDF. Please try downloading or opening in a new tab.', 'error');
            }
        }

        /**
         * Loads and displays a PDF file.
         * Automatically chooses the appropriate rendering method:
         * - PDF.js canvas rendering for mobile devices
         * - Native PDF viewer (object/iframe) for desktop browsers
         * 
         * Features:
         * - Cancels any in-progress PDF loading to prevent race conditions
         * - Updates sidebar active state
         * - Updates breadcrumb navigation
         * - Manages favorites button state
         * - Adds file to recent history
         * - Supports deep linking via URL parameters
         * 
         * @async
         * @function loadPdf
         * @param {string} pdfPath - The file path to the PDF (e.g., 'Semester 5/lecture.pdf')
         * 
         * @example
         * // Load a PDF file
         * await loadPdf('Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 1.pdf');
         */
        async function loadPdf(pdfPath) {
            // Cancel any previous PDF loading
            if (currentPdfLoadController) {
                currentPdfLoadController.abort();
                currentPdfLoadController = null;
            }
            
            // Update active state in sidebar
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.path === pdfPath) {
                    item.classList.add('active');
                }
            });
            
            // Show loading
            showLoadingIndicator();
            
            // Close sidebar on mobile
            closeSidebar();
            
            currentPdfPath = pdfPath;
            const encodedPath = encodeURI(pdfPath);
            const fileName = pdfPath.split('/').pop();
            
            // Update UI
            pdfTitle.textContent = fileName;
            downloadPdf.href = encodedPath;
            downloadPdf.download = fileName;
            openInNewTab.href = encodedPath;
            
            // Update breadcrumb
            updateBreadcrumb(pdfPath);
            
            // Update favorite button
            if (favorites.includes(pdfPath)) {
                favoritePdf.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd"/></svg>';
                favoritePdf.classList.remove('text-gray-400');
                favoritePdf.classList.add('text-yellow-500');
            } else {
                favoritePdf.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" /></svg>';
                favoritePdf.classList.remove('text-yellow-500');
                favoritePdf.classList.add('text-gray-400');
            }
            
            // Add to recent files
            addToRecentFiles(pdfPath);
            
            // Reset zoom
            currentZoom = 1.0;
            zoomLevel.textContent = '100%';
            
            // Check if we should use PDF.js canvas rendering (for mobile)
            const usePDFjs = typeof pdfjsLib !== 'undefined' && !supportsNativePDFViewing();
            usingCanvasRenderer = usePDFjs;
            
            if (usePDFjs) {
                // Use PDF.js canvas rendering for mobile devices
                pdfViewer.classList.add('hidden');
                pdfViewerFallback.classList.add('hidden');
                pdfCanvasContainer.classList.remove('hidden');
                
                await renderPDFWithCanvas(encodedPath);
            } else {
                // Use native PDF viewing for desktop
                // Clean up PDF.js document if switching from canvas mode
                if (pdfDoc) {
                    pdfDoc.destroy().catch(() => {}); // Ignore errors
                    pdfDoc = null;
                }
                
                // Hide page navigation for native mode
                pageNavigation.classList.add('hidden');
                
                pdfViewer.classList.remove('hidden');
                pdfCanvasContainer.classList.add('hidden');
                
                // Set PDF URL with view parameters for better display
                const pdfUrl = encodedPath + PDF_VIEW_MODE;
                
                // Load PDF using object tag (better mobile support)
                pdfViewer.onload = function() {
                    hideLoadingIndicator();
                    pdfContainer.classList.remove('hidden');
                };
                
                pdfViewer.onerror = function(e) {
                    console.error('PDF object tag failed:', e);
                    // Try iframe fallback
                    pdfViewerFallback.src = pdfUrl;
                    
                    // Set a timeout to check if iframe also fails
                    setTimeout(() => {
                        // If we're still in loading state after iframe attempt, show error
                        if (!loadingIndicator.classList.contains('hidden')) {
                            hideLoadingIndicator();
                            pdfContainer.classList.add('hidden');
                            
                            // Show error message with recovery options
                            showToast('PDF viewer failed. Please use "Open in New Tab" or "Download" buttons.', 'error');
                        }
                    }, PDF_LOAD_TIMEOUT_MS + 2000);
                    
                    hideLoadingIndicator();
                    pdfContainer.classList.remove('hidden');
                };
                
                // Clear previous iframe src to prevent double loading
                pdfViewerFallback.src = '';
                
                // Set the data attribute on object tag for PDF
                pdfViewer.setAttribute('data', pdfUrl);
                
                // Fallback timeout in case onload doesn't fire
                setTimeout(() => {
                    if (loadingIndicator.style.display === 'flex') {
                        hideLoadingIndicator();
                        pdfContainer.classList.remove('hidden');
                    }
                }, PDF_LOAD_TIMEOUT_MS);
            }
        }

        /**
         * ============================================================================
         * SIDEBAR MANAGEMENT FUNCTIONS
         * ============================================================================
         */
        
        // Sidebar toggle for mobile - toggle visibility when hamburger menu is clicked
        document.getElementById('toggleSidebar').addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
            sidebarOverlay.classList.toggle('hidden');
        });

        sidebarOverlay.addEventListener('click', closeSidebar);

        /**
         * Closes the sidebar on mobile devices.
         * Only affects devices with viewport width less than 1024px.
         * 
         * @function closeSidebar
         */
        function closeSidebar() {
            if (window.innerWidth < 1024) {
                sidebar.classList.add('-translate-x-full');
                sidebarOverlay.classList.add('hidden');
            }
        }
        
        /**
         * Toggles the sidebar between minimized and expanded states (desktop only).
         * In minimized state, only icons are visible.
         * Persists state to localStorage.
         * 
         * @function toggleSidebarMinimized
         */
        function toggleSidebarMinimized() {
            if (window.innerWidth < 1024) return; // Only works on desktop
            
            isSidebarMinimized = !isSidebarMinimized;
            safeSetLocalStorage('sidebarMinimized', isSidebarMinimized);
            
            if (isSidebarMinimized) {
                sidebar.classList.add('minimized');
                mainContent.classList.remove('lg:ml-80');
                mainContent.classList.add('lg:ml-16');
                if (footer) {
                    footer.classList.add('sidebar-minimized');
                }
                // Update minimize button icon
                if (minimizeSidebarBtn) {
                    minimizeSidebarBtn.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5" />
                        </svg>
                    `;
                    minimizeSidebarBtn.setAttribute('aria-label', 'Expand sidebar');
                    minimizeSidebarBtn.setAttribute('title', 'Expand sidebar');
                }
            } else {
                sidebar.classList.remove('minimized');
                mainContent.classList.remove('lg:ml-16');
                mainContent.classList.add('lg:ml-80');
                if (footer) {
                    footer.classList.remove('sidebar-minimized');
                }
                // Update minimize button icon
                if (minimizeSidebarBtn) {
                    minimizeSidebarBtn.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5" />
                        </svg>
                    `;
                    minimizeSidebarBtn.setAttribute('aria-label', 'Minimize sidebar');
                    minimizeSidebarBtn.setAttribute('title', 'Minimize sidebar');
                }
            }
        }
        
        // Add event listener for minimize button
        if (minimizeSidebarBtn) {
            minimizeSidebarBtn.addEventListener('click', toggleSidebarMinimized);
        }

        /**
         * ============================================================================
         * WINDOW RESIZE HANDLING
         * ============================================================================
         */
        
        // Handle window resize with debouncing for better mobile performance
        let resizeTimeout;
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 1024) {
                sidebar.classList.remove('-translate-x-full');
                sidebarOverlay.classList.add('hidden');
            }
            
            // Debounce re-rendering for better performance
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                // Re-render PDF if using canvas mode
                if (usingCanvasRenderer && pdfDoc && currentPdfPath) {
                    renderPDFWithCanvas(currentPdfPath).catch(error => {
                        console.error('Error re-rendering PDF on resize:', error);
                        showToast('Error updating PDF display. Please reload the page.', 'error');
                    });
                }
            }, RESIZE_DEBOUNCE_MS);
        });
        
        // Handle visual viewport resize specifically for mobile devices
        // This handles cases like keyboard appearance/disappearance
        if (window.visualViewport) {
            let visualViewportResizeTimeout;
            window.visualViewport.addEventListener('resize', () => {
                clearTimeout(visualViewportResizeTimeout);
                visualViewportResizeTimeout = setTimeout(() => {
                    if (usingCanvasRenderer && pdfDoc && currentPdfPath) {
                        renderPDFWithCanvas(currentPdfPath).catch(error => {
                            console.error('Error re-rendering PDF on viewport resize:', error);
                        });
                    }
                }, RESIZE_DEBOUNCE_MS);
            });
        }
        
        /**
         * ============================================================================
         * SEARCH FUNCTIONALITY
         * ============================================================================
         */
        
        // Search functionality with debounce for performance
        let searchTimeout;
        
        /**
         * Search input event handler.
         * Filters the file tree based on search term.
         * Uses debouncing to avoid excessive DOM operations.
         */
        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const searchTerm = e.target.value.toLowerCase().trim();
                const allItems = fileTree.querySelectorAll('.sidebar-item, .folder-container');
                
                if (searchTerm === '') {
                    // Show all items
                    allItems.forEach(item => {
                        item.style.display = '';
                    });
                    // Collapse all folders
                    fileTree.querySelectorAll('.folder-content').forEach(content => {
                        content.classList.remove('expanded');
                    });
                    fileTree.querySelectorAll('.chevron').forEach(chevron => {
                        chevron.classList.remove('rotate-90');
                    });
                } else {
                    // Hide all items first
                    allItems.forEach(item => {
                        item.style.display = 'none';
                    });
                    
                    // Show matching items and their parents
                    const items = fileTree.querySelectorAll('.sidebar-item');
                    items.forEach(item => {
                        // Add defensive null check
                        const text = (item.textContent || '').toLowerCase();
                        if (text.includes(searchTerm)) {
                            item.style.display = '';
                            
                            // Show parent folders
                            let parent = item.parentElement;
                            while (parent && parent !== fileTree) {
                                parent.style.display = '';
                                if (parent.classList && parent.classList.contains('folder-content')) {
                                    parent.classList.add('expanded');
                                    const header = parent.previousElementSibling;
                                    if (header) {
                                        const chevron = header.querySelector('.chevron');
                                        if (chevron) chevron.classList.add('rotate-90');
                                    }
                                }
                                parent = parent.parentElement;
                            }
                        }
                    });
                }
            }, SEARCH_DEBOUNCE_MS);
        });
        
        /**
         * ============================================================================
         * DARK MODE FUNCTIONALITY
         * ============================================================================
         */
        
        /**
         * Toggles dark mode on/off.
         * Persists preference to localStorage.
         * Updates the dark mode icon in the header.
         * 
         * @function toggleDarkMode
         */
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            safeSetLocalStorage('darkMode', isDarkMode);
            
            // Update icon to show sun (light mode) or moon (dark mode)
            if (isDarkMode) {
                darkModeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />';
            } else {
                darkModeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />';
            }
        }
        
        darkModeToggle.addEventListener('click', toggleDarkMode);
        
        /**
         * Toggles the favorite status of the currently viewed PDF.
         * Adds or removes the PDF from the favorites list.
         * Persists changes to localStorage.
         * 
         * @function toggleFavorite
         */
        function toggleFavorite() {
            if (!currentPdfPath) return;
            
            const index = favorites.indexOf(currentPdfPath);
            if (index > -1) {
                favorites.splice(index, 1);
                favoritePdf.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" /></svg>';
                favoritePdf.classList.remove('text-yellow-500');
                favoritePdf.classList.add('text-gray-400');
                showToast('Removed from favorites', 'info');
            } else {
                favorites.push(currentPdfPath);
                favoritePdf.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd"/></svg>';
                favoritePdf.classList.remove('text-gray-400');
                favoritePdf.classList.add('text-yellow-500');
                showToast('Added to favorites', 'success');
            }
            
            safeSetLocalStorage('pdfFavorites', favorites);
            updateFavoritesSection();
        }
        
        favoritePdf.addEventListener('click', toggleFavorite);
        
        /**
         * ============================================================================
         * NAVIGATION FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Collapses all folders in the sidebar file tree.
         * Useful for resetting the tree view or before navigating to a specific folder.
         * 
         * @function collapseAllFolders
         */
        function collapseAllFolders() {
            fileTree.querySelectorAll('.folder-content').forEach(content => {
                content.classList.remove('expanded');
            });
            fileTree.querySelectorAll('.chevron').forEach(chevron => {
                chevron.classList.remove('rotate-90');
            });
        }
        
        /**
         * Navigates to and expands a folder in the sidebar.
         * Expands all parent folders in the path and scrolls the folder into view.
         * Opens the sidebar on mobile devices.
         * 
         * @function navigateToFolder
         * @param {string} folderPath - The folder path to navigate to (e.g., 'Semester 5/IT5306')
         * 
         * @example
         * navigateToFolder('Semester 5/IT5306 Principles of Information Security');
         */
        function navigateToFolder(folderPath) {
            // Split path into parts
            const parts = folderPath.split('/');
            
            // Collapse all folders first
            collapseAllFolders();
            
            // Find and expand each folder in the path
            let currentElement = fileTree;
            for (let i = 0; i < parts.length; i++) {
                const part = parts[i];
                const folderContainers = currentElement.querySelectorAll(':scope > .folder-container');
                
                let foundFolder = false;
                for (const container of folderContainers) {
                    const header = container.querySelector(':scope > div');
                    if (!header) continue;
                    
                    const folderName = header.querySelector('span')?.textContent?.trim();
                    
                    if (folderName === part) {
                        // Expand this folder
                        const content = container.querySelector('.folder-content');
                        const chevron = header.querySelector('.chevron');
                        if (content) {
                            content.classList.add('expanded');
                        }
                        if (chevron) {
                            chevron.classList.add('rotate-90');
                        }
                        
                        // Scroll the folder header into view
                        header.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        
                        // Move to this folder's content for next iteration
                        if (content) {
                            currentElement = content;
                            foundFolder = true;
                        }
                        break;
                    }
                }
                
                // If folder not found, stop searching
                if (!foundFolder && i < parts.length - 1) {
                    break;
                }
            }
            
            // Open sidebar on mobile
            if (window.innerWidth < 1024) {
                sidebar.classList.remove('-translate-x-full');
                sidebarOverlay.classList.remove('hidden');
            }
        }
        
        /**
         * Navigates to the home/welcome screen.
         * Clears the current PDF and resets the view state.
         * Updates the URL to remove the PDF parameter.
         * 
         * @function navigateHome
         */
        function navigateHome() {
            // Clear current PDF
            currentPdfPath = '';
            
            // Hide PDF container and show welcome message
            pdfContainer.classList.add('hidden');
            welcomeMessage.classList.remove('hidden');
            loadingIndicator.classList.add('hidden');
            
            // Remove active state from sidebar items
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Collapse all folders
            collapseAllFolders();
            
            // Update URL to remove pdf parameter
            const url = new URL(window.location);
            url.searchParams.delete('pdf');
            window.history.pushState({}, '', url);
        }
        
        /**
         * ============================================================================
         * BREADCRUMB FUNCTIONS
         * ============================================================================
         */
        
        /**
         * Creates a breadcrumb separator SVG element (chevron right).
         * 
         * @function createBreadcrumbSeparator
         * @returns {SVGElement} An SVG element for the breadcrumb separator
         */
        function createBreadcrumbSeparator() {
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('class', 'h-4 w-4 mx-1 text-gray-400');
            svg.setAttribute('fill', 'currentColor');
            svg.setAttribute('viewBox', '0 0 20 20');
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('fill-rule', 'evenodd');
            path.setAttribute('d', 'M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z');
            path.setAttribute('clip-rule', 'evenodd');
            svg.appendChild(path);
            return svg;
        }
        
        /**
         * Updates the breadcrumb navigation for the current PDF.
         * Creates clickable links for each folder in the path.
         * Uses secure DOM manipulation to prevent XSS attacks.
         * 
         * @function updateBreadcrumb
         * @param {string} pdfPath - The full path to the current PDF file
         * 
         * @example
         * updateBreadcrumb('Semester 5/IT5306 Principles of Information Security/Topic 1.pdf');
         * // Renders: Home > Semester 5 > IT5306 Principles of Information Security > Topic 1.pdf
         */
        function updateBreadcrumb(pdfPath) {
            const parts = pdfPath.split('/');
            
            // Clear existing breadcrumb
            breadcrumb.innerHTML = '';
            
            // Create Home link
            const homeLi = document.createElement('li');
            homeLi.className = 'flex items-center';
            const homeLink = document.createElement('a');
            homeLink.href = '#';
            homeLink.className = 'hover:text-blue-600 hover:underline transition-colors cursor-pointer';
            homeLink.textContent = 'Home';
            homeLink.addEventListener('click', (e) => {
                e.preventDefault();
                navigateHome();
            });
            homeLi.appendChild(homeLink);
            breadcrumb.appendChild(homeLi);
            
            // Build path incrementally and create folder links
            let path = '';
            parts.forEach((part, index) => {
                const li = document.createElement('li');
                li.className = 'flex items-center';
                
                // Add separator
                li.appendChild(createBreadcrumbSeparator());
                
                if (index < parts.length - 1) {
                    // Folder link (clickable)
                    path += (path ? '/' : '') + part;
                    const folderPath = path; // Capture current path for closure
                    
                    const link = document.createElement('a');
                    link.href = '#';
                    link.className = 'text-gray-500 hover:text-blue-600 hover:underline transition-colors cursor-pointer';
                    link.textContent = part;
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        navigateToFolder(folderPath);
                    });
                    li.appendChild(link);
                } else {
                    // Current file (non-clickable)
                    const span = document.createElement('span');
                    span.className = 'text-gray-700 font-medium truncate max-w-xs';
                    span.title = part;
                    span.textContent = part;
                    li.appendChild(span);
                }
                
                breadcrumb.appendChild(li);
            });
        }
        
        /**
         * ============================================================================
         * FULLSCREEN FUNCTIONALITY
         * ============================================================================
         */
        
        /** @type {boolean} Flag indicating if fullscreen mode is currently active */
        let isFullscreenActive = false;
        
        /**
         * Toggles fullscreen mode for the PDF viewer.
         * Uses Fullscreen API with vendor prefix fallbacks.
         * Shows toast notification if fullscreen is not supported.
         * 
         * @function toggleFullscreen
         */
        function toggleFullscreen() {
            const container = document.getElementById('pdfIframeContainer');
            
            if (!document.fullscreenElement && !document.webkitFullscreenElement && 
                !document.mozFullScreenElement && !document.msFullscreenElement) {
                // Enter fullscreen
                if (container.requestFullscreen) {
                    container.requestFullscreen().catch(err => {
                        console.error('Fullscreen error:', err);
                        showToast('Unable to enter fullscreen mode', 'error');
                    });
                } else if (container.webkitRequestFullscreen) {
                    container.webkitRequestFullscreen();
                } else if (container.mozRequestFullScreen) {
                    container.mozRequestFullScreen();
                } else if (container.msRequestFullscreen) {
                    container.msRequestFullscreen();
                } else {
                    // Fallback for mobile devices that don't support fullscreen API
                    showToast('Fullscreen not supported. Try rotating your device.', 'info');
                }
            } else {
                // Exit fullscreen
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }
        
        /**
         * Handles fullscreen change events from all vendor-prefixed APIs.
         * Updates body class and hides sidebar when entering fullscreen.
         * 
         * @function handleFullscreenChange
         */
        function handleFullscreenChange() {
            isFullscreenActive = !!(document.fullscreenElement || document.webkitFullscreenElement || 
                                    document.mozFullScreenElement || document.msFullscreenElement);
            
            if (isFullscreenActive) {
                document.body.classList.add('fullscreen-active');
                // Hide sidebar in fullscreen
                sidebar.classList.add('-translate-x-full');
                sidebarOverlay.classList.add('hidden');
            } else {
                document.body.classList.remove('fullscreen-active');
            }
        }
        
        // Add fullscreen event listeners for all vendor prefixes
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
        document.addEventListener('mozfullscreenchange', handleFullscreenChange);
        document.addEventListener('MSFullscreenChange', handleFullscreenChange);
        
        fullscreenToggle.addEventListener('click', toggleFullscreen);
        
        /**
         * ============================================================================
         * ZOOM FUNCTIONALITY
         * ============================================================================
         */
        
        /**
         * Updates the zoom level for the PDF viewer.
         * Clamps the zoom level between MIN_ZOOM and MAX_ZOOM.
         * Re-renders the PDF when using canvas mode.
         * 
         * @function updateZoom
         * @param {number} delta - The amount to change the zoom level (e.g., 0.1 for +10%)
         * 
         * @example
         * updateZoom(0.1);  // Zoom in by 10%
         * updateZoom(-0.1); // Zoom out by 10%
         */
        function updateZoom(delta) {
            currentZoom = Math.max(MIN_ZOOM, Math.min(MAX_ZOOM, currentZoom + delta));
            zoomLevel.textContent = Math.round(currentZoom * 100) + '%';
            
            if (usingCanvasRenderer && pdfDoc) {
                renderPDFWithCanvas(currentPdfPath);
            }
        }
        
        zoomIn.addEventListener('click', () => updateZoom(0.1));
        zoomOut.addEventListener('click', () => updateZoom(-0.1));
        
        /**
         * ============================================================================
         * KEYBOARD SHORTCUTS
         * ============================================================================
         * Supported shortcuts:
         * - ? or Shift+/ : Open help modal
         * - Escape : Close modals, blur focused input
         * - Ctrl/Cmd + : Zoom in
         * - Ctrl/Cmd - : Zoom out
         * - Ctrl/Cmd 0 : Reset zoom to 100%
         * - Ctrl/Cmd F : Focus search input
         * - Left Arrow : Previous page (canvas mode)
         * - Right Arrow : Next page (canvas mode)
         */
        document.addEventListener('keydown', (e) => {
            // Don't trigger shortcuts when typing in input fields
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                if (e.key === 'Escape') {
                    e.target.blur();
                }
                return;
            }
            
            // Help modal shortcut
            if (e.key === '?' || (e.shiftKey && e.key === '/')) {
                e.preventDefault();
                openHelpModal();
                return;
            }
            
            // Escape key to close modals
            if (e.key === 'Escape') {
                if (helpModal.classList.contains('active')) {
                    closeHelpModal();
                }
                return;
            }
            
            if (e.ctrlKey || e.metaKey) {
                if (e.key === '=' || e.key === '+') {
                    e.preventDefault();
                    updateZoom(0.1);
                } else if (e.key === '-') {
                    e.preventDefault();
                    updateZoom(-0.1);
                } else if (e.key === '0') {
                    e.preventDefault();
                    currentZoom = 1.0;
                    zoomLevel.textContent = '100%';
                    if (usingCanvasRenderer && pdfDoc) {
                        renderPDFWithCanvas(currentPdfPath);
                    }
                } else if (e.key === 'f') {
                    e.preventDefault();
                    searchInput.focus();
                }
            }
            
            // Arrow keys for page navigation in canvas mode
            if (usingCanvasRenderer && pdfDoc) {
                if (e.key === 'ArrowLeft' && currentPage > 1) {
                    goToPreviousPage();
                } else if (e.key === 'ArrowRight' && currentPage < pdfDoc.numPages) {
                    goToNextPage();
                }
            }
        });
        
        /**
         * ============================================================================
         * PAGE NAVIGATION FUNCTIONS (Canvas Mode)
         * ============================================================================
         */
        
        /**
         * Navigates to the previous page in canvas mode.
         * Updates the page display and scrolls to the page.
         * 
         * @function goToPreviousPage
         */
        function goToPreviousPage() {
            if (currentPage > 1) {
                currentPage--;
                updatePageDisplay();
                scrollToPage(currentPage);
            }
        }
        
        /**
         * Navigates to the next page in canvas mode.
         * Updates the page display and scrolls to the page.
         * 
         * @function goToNextPage
         */
        function goToNextPage() {
            if (pdfDoc && currentPage < pdfDoc.numPages) {
                currentPage++;
                updatePageDisplay();
                scrollToPage(currentPage);
            }
        }
        
        /**
         * Updates the page number display in the navigation controls.
         * 
         * @function updatePageDisplay
         */
        function updatePageDisplay() {
            pageNum.textContent = currentPage;
        }
        
        /**
         * Scrolls to a specific page in the canvas container.
         * Uses smooth scrolling for better user experience.
         * 
         * @function scrollToPage
         * @param {number} page - The page number to scroll to (1-indexed)
         */
        function scrollToPage(page) {
            const canvases = pdfCanvasContainer.querySelectorAll('.pdf-page-canvas');
            if (canvases[page - 1]) {
                canvases[page - 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        prevPage.addEventListener('click', goToPreviousPage);
        nextPage.addEventListener('click', goToNextPage);
        
        /**
         * Adds a PDF file path to the recent files list.
         * Moves existing entries to the top and limits the list to MAX_RECENT_FILES.
         * Persists to localStorage.
         * 
         * @function addToRecentFiles
         * @param {string} pdfPath - The PDF file path to add to recent files
         */
        function addToRecentFiles(pdfPath) {
            recentFiles = recentFiles.filter(f => f !== pdfPath);
            recentFiles.unshift(pdfPath);
            if (recentFiles.length > MAX_RECENT_FILES) {
                recentFiles = recentFiles.slice(0, MAX_RECENT_FILES);
            }
            safeSetLocalStorage('pdfRecentFiles', recentFiles);
            updateRecentSection();
        }

        /**
         * ============================================================================
         * APPLICATION INITIALIZATION
         * ============================================================================
         */
        
        // Load file structure and initialize the application
        loadFileStructure();
        
        // Apply dark mode if previously set in localStorage
        if (isDarkMode) {
            document.body.classList.add('dark-mode');
            darkModeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />';
        }
        
        // Apply sidebar minimized state if previously set (desktop only)
        if (isSidebarMinimized && window.innerWidth >= 1024) {
            sidebar.classList.add('minimized');
            mainContent.classList.remove('lg:ml-80');
            mainContent.classList.add('lg:ml-16');
            if (footer) {
                footer.classList.add('sidebar-minimized');
            }
            if (minimizeSidebarBtn) {
                minimizeSidebarBtn.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5" />
                    </svg>
                `;
                minimizeSidebarBtn.setAttribute('aria-label', 'Expand sidebar');
                minimizeSidebarBtn.setAttribute('title', 'Expand sidebar');
            }
        }
        
        // Register Service Worker for offline support and caching
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then((registration) => {
                        console.log('[App] ServiceWorker registered:', registration.scope);
                        
                        // Check for updates periodically
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            if (newWorker) {
                                newWorker.addEventListener('statechange', () => {
                                    if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                        // New content available, show toast
                                        showToast('New version available! Refresh to update.', 'info');
                                    }
                                });
                            }
                        });
                    })
                    .catch((error) => {
                        console.warn('[App] ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
