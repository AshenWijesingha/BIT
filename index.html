<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIT Repository - PDF Viewer</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Tailwind-like utility classes as fallback when CDN is blocked */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; }
        .min-h-screen { min-height: 100vh; }
        .bg-gray-100 { background-color: #f3f4f6; }
        .bg-white { background-color: #ffffff; }
        .bg-blue-600 { background-color: #2563eb; }
        .bg-blue-500 { background-color: #3b82f6; }
        .bg-blue-700 { background-color: #1d4ed8; }
        .bg-gray-200 { background-color: #e5e7eb; }
        .bg-gray-800 { background-color: #1f2937; }
        .text-white { color: #ffffff; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-gray-800 { color: #1f2937; }
        .text-gray-500 { color: #6b7280; }
        .text-gray-400 { color: #9ca3af; }
        .text-yellow-500 { color: #eab308; }
        .text-red-500 { color: #ef4444; }
        .text-blue-500 { color: #3b82f6; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .font-medium { font-weight: 500; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-base { font-size: 1rem; line-height: 1.5rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-center { text-align: center; }
        .flex { display: flex; }
        .inline-flex { display: inline-flex; }
        .hidden { display: none !important; }
        .block { display: block; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .flex-col { flex-direction: column; }
        .flex-1 { flex: 1 1 0%; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-shrink-0 { flex-shrink: 0; }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .p-1\.5 { padding: 0.375rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-1\.5 { padding-top: 0.375rem; padding-bottom: 0.375rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .pt-16 { padding-top: 4rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mt-2 { margin-top: 0.5rem; }
        .ml-4 { margin-left: 1rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .w-64 { width: 16rem; }
        .w-80 { width: 20rem; }
        .w-full { width: 100%; }
        .h-full { height: 100%; }
        .h-3 { height: 0.75rem; }
        .h-4 { height: 1rem; }
        .h-5 { height: 1.25rem; }
        .h-6 { height: 1.5rem; }
        .h-12 { height: 3rem; }
        .h-16 { height: 4rem; }
        .h-20 { height: 5rem; }
        .h-24 { height: 6rem; }
        .w-3 { width: 0.75rem; }
        .w-4 { width: 1rem; }
        .w-5 { width: 1.25rem; }
        .w-6 { width: 1.5rem; }
        .w-12 { width: 3rem; }
        .w-16 { width: 4rem; }
        .w-20 { width: 5rem; }
        .w-24 { width: 6rem; }
        .max-w-xs { max-width: 20rem; }
        .max-w-sm { max-width: 24rem; }
        .max-w-md { max-width: 28rem; }
        .max-w-lg { max-width: 32rem; }
        .min-w-0 { min-width: 0; }
        .fixed { position: fixed; }
        .sticky { position: sticky; }
        .relative { position: relative; }
        .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
        .top-14 { top: 3.5rem; }
        .top-16 { top: 4rem; }
        .z-30 { z-index: 30; }
        .z-40 { z-index: 40; }
        .z-50 { z-index: 50; }
        .overflow-y-auto { overflow-y: auto; }
        .overflow-x-hidden { overflow-x: hidden; }
        .overflow-hidden { overflow: hidden; }
        .rounded { border-radius: 0.25rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-t-lg { border-top-left-radius: 0.5rem; border-top-right-radius: 0.5rem; }
        .rounded-b-lg { border-bottom-left-radius: 0.5rem; border-bottom-right-radius: 0.5rem; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
        .truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .break-words { overflow-wrap: break-word; word-break: break-word; }
        .whitespace-nowrap { white-space: nowrap; }
        .cursor-pointer { cursor: pointer; }
        .transition-transform { transition-property: transform; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
        .duration-300 { transition-duration: 300ms; }
        .border { border-width: 1px; }
        .border-gray-200 { border-color: #e5e7eb; }
        
        /* Transform utilities */
        .-translate-x-full { transform: translateX(-100%); }
        .translate-x-0 { transform: translateX(0); }
        .rotate-90 { transform: rotate(90deg); }
        
        /* Hover states */
        .hover\:bg-gray-100:hover { background-color: #f3f4f6; }
        .hover\:bg-gray-300:hover { background-color: #d1d5db; }
        .hover\:bg-blue-600:hover { background-color: #2563eb; }
        .hover\:bg-blue-700:hover { background-color: #1d4ed8; }
        .hover\:bg-blue-800:hover { background-color: #1e40af; }
        
        /* Mobile-first responsive utilities */
        /* Extra small devices (phones, less than 480px) */
        @media (max-width: 480px) {
            .xs\:hidden { display: none !important; }
            .xs\:block { display: block !important; }
            .xs\:flex { display: flex !important; }
            .xs\:text-xs { font-size: 0.75rem; line-height: 1rem; }
            .xs\:text-sm { font-size: 0.875rem; line-height: 1.25rem; }
            .xs\:text-base { font-size: 1rem; line-height: 1.5rem; }
            .xs\:p-2 { padding: 0.5rem; }
            .xs\:p-3 { padding: 0.75rem; }
            .xs\:px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
            .xs\:py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
            .xs\:gap-1 { gap: 0.25rem; }
            .xs\:gap-2 { gap: 0.5rem; }
            .xs\:w-full { width: 100%; }
            .xs\:flex-col { flex-direction: column; }
            .xs\:flex-wrap { flex-wrap: wrap; }
        }
        
        /* Small devices (phones, 480px and up) */
        @media (min-width: 480px) {
            .sm\:hidden { display: none !important; }
            .sm\:block { display: block !important; }
            .sm\:inline { display: inline !important; }
            .sm\:inline-flex { display: inline-flex !important; }
            .sm\:flex { display: flex !important; }
            .sm\:text-sm { font-size: 0.875rem; line-height: 1.25rem; }
            .sm\:text-base { font-size: 1rem; line-height: 1.5rem; }
            .sm\:text-lg { font-size: 1.125rem; line-height: 1.75rem; }
            .sm\:text-xl { font-size: 1.25rem; line-height: 1.75rem; }
            .sm\:p-2 { padding: 0.5rem; }
            .sm\:p-3 { padding: 0.75rem; }
            .sm\:p-4 { padding: 1rem; }
            .sm\:p-6 { padding: 1.5rem; }
            .sm\:px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
            .sm\:px-4 { padding-left: 1rem; padding-right: 1rem; }
            .sm\:py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
            .sm\:py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
            .sm\:gap-1 { gap: 0.25rem; }
            .sm\:gap-2 { gap: 0.5rem; }
            .sm\:gap-3 { gap: 0.75rem; }
            .sm\:gap-4 { gap: 1rem; }
            .sm\:mb-4 { margin-bottom: 1rem; }
            .sm\:h-5 { height: 1.25rem; }
            .sm\:w-5 { width: 1.25rem; }
            .sm\:h-6 { height: 1.5rem; }
            .sm\:w-6 { width: 1.5rem; }
            .sm\:h-4 { height: 1rem; }
            .sm\:w-4 { width: 1rem; }
            .sm\:h-20 { height: 5rem; }
            .sm\:w-20 { width: 5rem; }
            .sm\:flex-row { flex-direction: row; }
        }
        
        /* Medium devices (tablets, 768px and up) */
        @media (min-width: 768px) {
            .md\:hidden { display: none !important; }
            .md\:block { display: block !important; }
            .md\:inline-flex { display: inline-flex !important; }
            .md\:flex { display: flex !important; }
            .md\:text-base { font-size: 1rem; line-height: 1.5rem; }
            .md\:text-lg { font-size: 1.125rem; line-height: 1.75rem; }
            .md\:text-xl { font-size: 1.25rem; line-height: 1.75rem; }
            .md\:text-2xl { font-size: 1.5rem; line-height: 2rem; }
            .md\:p-3 { padding: 0.75rem; }
            .md\:p-4 { padding: 1rem; }
            .md\:p-6 { padding: 1.5rem; }
            .md\:p-8 { padding: 2rem; }
            .md\:px-4 { padding-left: 1rem; padding-right: 1rem; }
            .md\:gap-3 { gap: 0.75rem; }
            .md\:gap-4 { gap: 1rem; }
            .md\:h-24 { height: 6rem; }
            .md\:w-24 { width: 6rem; }
            .md\:flex-row { flex-direction: row; }
        }
        
        /* Large devices (desktops, 1024px and up) */
        @media (min-width: 1024px) {
            .lg\:ml-80 { margin-left: 20rem; }
            .lg\:translate-x-0 { transform: translateX(0); }
            .lg\:hidden { display: none !important; }
            .lg\:block { display: block !important; }
            .lg\:inline-flex { display: inline-flex !important; }
            .lg\:flex { display: flex !important; }
            .lg\:text-base { font-size: 1rem; line-height: 1.5rem; }
            .lg\:text-lg { font-size: 1.125rem; line-height: 1.75rem; }
            .lg\:text-xl { font-size: 1.25rem; line-height: 1.75rem; }
            .lg\:text-2xl { font-size: 1.5rem; line-height: 2rem; }
            .lg\:p-4 { padding: 1rem; }
            .lg\:p-8 { padding: 2rem; }
            .lg\:gap-4 { gap: 1rem; }
        }

        /* Custom scrollbar styling */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Active sidebar item */
        .sidebar-item.active { background-color: #3b82f6; color: white; }
        .sidebar-item.active span { color: white; }
        .sidebar-item.active svg { color: white; }
        
        /* Folder expansion animation */
        .folder-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .folder-content.expanded { max-height: 5000px; }
        
        /* PDF iframe container - responsive heights */
        .pdf-iframe-container {
            background: #525659;
            min-height: calc(100vh - 10rem);
            border-radius: 0 0 0.5rem 0.5rem;
        }
        
        .pdf-iframe-container iframe {
            width: 100%;
            height: calc(100vh - 10rem);
            border: none;
            border-radius: 0 0 0.5rem 0.5rem;
        }
        
        @media (max-width: 768px) {
            .pdf-iframe-container {
                min-height: calc(100vh - 14rem);
            }
            .pdf-iframe-container iframe {
                height: calc(100vh - 14rem);
            }
        }
        
        /* Responsive sidebar width */
        .sidebar-responsive {
            width: 100%;
            max-width: 20rem;
        }
        
        @media (min-width: 480px) {
            .sidebar-responsive {
                width: 20rem;
            }
        }
        
        /* Loading spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Sidebar overlay */
        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 30;
        }
        
        /* Header height constants */
        .header-height { height: 56px; }
        .header-spacing { padding-top: 56px; }
        .sidebar-position { top: 56px; height: calc(100vh - 56px); }
        .main-min-height { min-height: calc(100vh - 56px); }
        .content-min-height { min-height: calc(100vh - 7rem); }
        
        /* Ensure proper height calculations */
        html, body { height: 100%; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Header -->
    <header class="bg-blue-600 text-white shadow-lg fixed w-full z-50 header-height">
        <div class="px-3 sm:px-4 py-2 sm:py-3 flex items-center justify-between h-full">
            <h1 class="text-base sm:text-lg md:text-xl lg:text-2xl font-bold flex items-center gap-1 sm:gap-2 min-w-0">
                <span class="flex-shrink-0">ðŸ“š</span>
                <span class="truncate">BIT Repository</span>
                <span class="hidden sm:inline truncate"> - PDF Viewer</span>
            </h1>
            <button id="toggleSidebar" class="lg:hidden bg-blue-700 hover:bg-blue-800 px-2 sm:px-3 py-2 rounded flex-shrink-0 ml-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </div>
    </header>

    <div class="flex header-spacing">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar-responsive sidebar-position bg-white shadow-lg fixed overflow-y-auto transition-all duration-300 z-40 -translate-x-full lg:translate-x-0">
            <div class="p-3 sm:p-4">
                <h2 class="text-sm sm:text-base lg:text-lg font-semibold text-gray-700 mb-3 sm:mb-4 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                    </svg>
                    <span>PDF Files</span>
                </h2>
                <div id="fileTree" class="space-y-2">
                    <!-- File tree will be dynamically populated by buildFileTree() function -->
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 lg:ml-80 p-2 sm:p-3 md:p-4 main-min-height">
            <!-- Welcome Message -->
            <div id="welcomeMessage" class="flex flex-col items-center justify-center text-center content-min-height">
                <div class="bg-white rounded-xl shadow-lg p-4 sm:p-6 md:p-8 max-w-xs sm:max-w-sm md:max-w-lg mx-2 sm:mx-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 sm:h-20 sm:w-20 md:h-24 md:w-24 mx-auto text-blue-500 mb-3 sm:mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    <h2 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-2">Welcome to BIT PDF Viewer</h2>
                    <p class="text-sm sm:text-base text-gray-600 mb-3 sm:mb-4">Select a PDF file from the sidebar to start reading.</p>
                    <p class="text-xs sm:text-sm text-gray-500">This repository contains course materials for BIT (Bachelor of Information Technology) program.</p>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="hidden flex-col items-center justify-center content-min-height">
                <div class="loader mb-4"></div>
                <p class="text-sm sm:text-base text-gray-600">Loading PDF...</p>
            </div>

            <!-- PDF Viewer Container -->
            <div id="pdfContainer" class="hidden">
                <!-- PDF Controls -->
                <div class="bg-white rounded-t-lg shadow-lg p-2 sm:p-3 md:p-4 sticky top-14 z-30">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 md:gap-4">
                        <div class="flex items-center gap-2 min-w-0 flex-1">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 text-red-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            <h3 id="pdfTitle" class="text-sm sm:text-base md:text-lg font-semibold text-gray-700 truncate"></h3>
                        </div>
                        <div class="flex items-center gap-2 flex-shrink-0">
                            <a id="downloadPdf" href="#" download class="bg-blue-500 hover:bg-blue-600 text-white px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded flex items-center gap-1 sm:gap-2 transition-all text-xs sm:text-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                                </svg>
                                <span class="hidden sm:inline">Download</span>
                            </a>
                            <a id="openInNewTab" href="#" target="_blank" class="bg-gray-200 hover:bg-gray-300 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded flex items-center gap-1 sm:gap-2 transition-all text-gray-700 text-xs sm:text-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                                </svg>
                                <span class="hidden sm:inline">Open in New Tab</span>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- PDF iframe Container -->
                <div id="pdfIframeContainer" class="pdf-iframe-container">
                    <iframe id="pdfViewer" title="PDF Viewer"></iframe>
                </div>
            </div>
        </main>
    </div>

    <!-- Overlay for mobile sidebar -->
    <div id="sidebarOverlay" class="sidebar-overlay hidden lg:hidden"></div>

    <script>
        // Constants
        const PDF_LOAD_TIMEOUT_MS = 3000; // Fallback timeout for PDF loading
        const INDENT_SIZE_PX = 12; // Indentation for nested sidebar items

        // PDF Files organized by folder structure
        const pdfFiles = {
            "BIT Project": [
                "BIT Project/2014173.pdf"
            ],
            "Semester 5": {
                "_root": [
                    "Semester 5/2014173_sem5_ExamApplication.pdf",
                    "Semester 5/Notice-Semester-1-_-3.pdf",
                    "Semester 5/Semester-5-Examination-Applications-are-Open-Now.pdf"
                ],
                "EN5106 Fundamentals of Management & Entrepreneurship": [
                    "Semester 5/EN5106 Fundamentals of Management & Entrepreneurship/EN 5106 - Lesson 1.pdf",
                    "Semester 5/EN5106 Fundamentals of Management & Entrepreneurship/EN 5106 - Lesson 2.pdf",
                    "Semester 5/EN5106 Fundamentals of Management & Entrepreneurship/EN 5106 - Lesson 3.pdf",
                    "Semester 5/EN5106 Fundamentals of Management & Entrepreneurship/EN 5106 - Lesson 4.pdf",
                    "Semester 5/EN5106 Fundamentals of Management & Entrepreneurship/EN 5106 - Lesson 5.pdf",
                    "Semester 5/EN5106 Fundamentals of Management & Entrepreneurship/Topic 6.pdf",
                    "Semester 5/EN5106 Fundamentals of Management & Entrepreneurship/Topic 7.pdf",
                    "Semester 5/EN5106 Fundamentals of Management & Entrepreneurship/Topic 8.pdf",
                    "Semester 5/EN5106 Fundamentals of Management & Entrepreneurship/Topic 10.pdf",
                    "Semester 5/EN5106 Fundamentals of Management & Entrepreneurship/EN5106-Fundamentals of Management  Entrepreneurship-V2.pdf"
                ],
                "IT5206 Professional Practice": [
                    "Semester 5/IT5206 Professional Practice/IT5206- Professional Practice - V2.pdf",
                    "Semester 5/IT5206 Professional Practice/BIT level III - Professional Practice - Lec 2 for vle.pdf",
                    "Semester 5/IT5206 Professional Practice/BIT level III - Proffessional Practice - Lec 3 for vle.pdf",
                    "Semester 5/IT5206 Professional Practice/IT5206 - Lesson 4.pdf",
                    "Semester 5/IT5206 Professional Practice/Internet Issues for vle.pdf",
                    "Semester 5/IT5206 Professional Practice/Intellectual Property v1 Jan3.pdf"
                ],
                "IT5306 Principles of Information Security": [
                    "Semester 5/IT5306 Principles of Information Security/IT5306- Principles of Information Security -V2.pdf",
                    "Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 1.pdf",
                    "Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 2.pdf",
                    "Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 3.pdf",
                    "Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 4.pdf",
                    "Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 5.pdf",
                    "Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 6.pdf",
                    "Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 7.pdf",
                    "Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 8.pdf",
                    "Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 9.pdf",
                    "Semester 5/IT5306 Principles of Information Security/IT5306-Teachers note-Topic 10.pdf"
                ],
                "IT5406 Systems & Network Administration": [
                    "Semester 5/IT5406 Systems & Network Administration/IT5406- Systems  Network Administration_syllabus.pdf",
                    "Semester 5/IT5406 Systems & Network Administration/IT5406 Topic 1 - moderated by Dr.Chamath and formatted final.pdf",
                    "Semester 5/IT5406 Systems & Network Administration/IT5406 Topic 2 - moderated - formatted final.pdf",
                    "Semester 5/IT5406 Systems & Network Administration/Topic 3 - Teachers note.pdf",
                    "Semester 5/IT5406 Systems & Network Administration/Topic 4 - Teachers note.pdf",
                    "Semester 5/IT5406 Systems & Network Administration/Topic 5 - Teachers note.pdf",
                    "Semester 5/IT5406 Systems & Network Administration/Topic 6 -Teachers note.pdf"
                ],
                "IT5506 Mathematics for Computing II": [
                    "Semester 5/IT5506 Mathematics for Computing II/IT5506- Mathematics for Computing II-Without ILO V2 - Final Version.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Lession_1.1_Final - v2.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Matrices -1.2 final.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Matrices -1.3 final.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Matrices -1.4 final.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Matrices -1.5 final.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Lession-1.6_Vector_Spaces_Final - v2.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Lession-1.7_Linear_Transformation_final - v2.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Lession-1.8_Orthogonality_final - v2.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Linear programming.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Linear Programming 2.1 v2 final.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Integer programming.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/Integer Programming 2.2 v2 final.pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/IT5506 Section 03 Handout 01 (draft).pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/IT5506 Section 03 Handout 02 (draft).pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/IT5506 Section 03 Handout 03 (draft).pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/IT5506 Section 03 Handout 05 (draft).pdf",
                    "Semester 5/IT5506 Mathematics for Computing II/IT5506 Section 03 Handout 06 (draft).pdf"
                ]
            }
        };

        // State variables
        let currentPdfPath = '';

        // DOM Elements
        const fileTree = document.getElementById('fileTree');
        const welcomeMessage = document.getElementById('welcomeMessage');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const pdfContainer = document.getElementById('pdfContainer');
        const pdfTitle = document.getElementById('pdfTitle');
        const downloadPdf = document.getElementById('downloadPdf');
        const openInNewTab = document.getElementById('openInNewTab');
        const pdfViewer = document.getElementById('pdfViewer');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        // Build file tree
        function buildFileTree() {
            fileTree.innerHTML = '';
            
            for (const [folder, content] of Object.entries(pdfFiles)) {
                const folderElement = createFolderElement(folder, content);
                fileTree.appendChild(folderElement);
            }
        }

        function createFolderElement(name, content, level = 0) {
            const container = document.createElement('div');
            container.className = 'folder-container';
            
            // Folder header - responsive margin calculation
            const header = document.createElement('div');
            header.className = 'flex items-center gap-1 sm:gap-2 p-1.5 sm:p-2 rounded cursor-pointer hover:bg-gray-100';
            header.style.marginLeft = (level * INDENT_SIZE_PX) + 'px';
            header.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 text-yellow-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                </svg>
                <span class="text-xs sm:text-sm font-medium text-gray-700 flex-1 truncate" title="${name}">${name}</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 sm:h-4 sm:w-4 text-gray-400 chevron transition-transform flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            `;
            
            // Folder content
            const contentDiv = document.createElement('div');
            contentDiv.className = 'folder-content';
            
            if (Array.isArray(content)) {
                // Simple array of files
                content.forEach(file => {
                    const fileElement = createFileElement(file, level + 1);
                    contentDiv.appendChild(fileElement);
                });
            } else {
                // Object with subfolders and _root files
                if (content._root) {
                    content._root.forEach(file => {
                        const fileElement = createFileElement(file, level + 1);
                        contentDiv.appendChild(fileElement);
                    });
                }
                
                // Subfolders
                for (const [subFolder, subContent] of Object.entries(content)) {
                    if (subFolder !== '_root') {
                        const subFolderElement = createFolderElement(subFolder, subContent, level + 1);
                        contentDiv.appendChild(subFolderElement);
                    }
                }
            }
            
            // Toggle folder expansion
            header.addEventListener('click', () => {
                contentDiv.classList.toggle('expanded');
                header.querySelector('.chevron').classList.toggle('rotate-90');
            });
            
            container.appendChild(header);
            container.appendChild(contentDiv);
            
            return container;
        }

        function createFileElement(filePath, level) {
            const fileName = filePath.split('/').pop().replace('.pdf', '');
            const element = document.createElement('div');
            element.className = 'sidebar-item flex items-center gap-1 sm:gap-2 p-1.5 sm:p-2 rounded cursor-pointer hover:bg-gray-100 transition-all';
            element.style.marginLeft = (level * INDENT_SIZE_PX) + 'px';
            element.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 sm:h-5 sm:w-5 text-red-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <span class="text-xs sm:text-sm text-gray-600 truncate" title="${fileName}">${fileName}</span>
            `;
            element.dataset.path = filePath;
            element.addEventListener('click', () => loadPdf(filePath));
            return element;
        }

        // Load and display PDF using iframe
        function loadPdf(pdfPath) {
            // Update active state in sidebar
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.path === pdfPath) {
                    item.classList.add('active');
                }
            });
            
            // Show loading
            welcomeMessage.classList.add('hidden');
            pdfContainer.classList.add('hidden');
            loadingIndicator.classList.remove('hidden');
            loadingIndicator.style.display = 'flex';
            
            // Close sidebar on mobile
            closeSidebar();
            
            currentPdfPath = pdfPath;
            const encodedPath = encodeURI(pdfPath);
            const fileName = pdfPath.split('/').pop();
            
            // Update UI
            pdfTitle.textContent = fileName;
            downloadPdf.href = encodedPath;
            downloadPdf.download = fileName;
            openInNewTab.href = encodedPath;
            
            // Load PDF in iframe
            pdfViewer.onload = function() {
                loadingIndicator.classList.add('hidden');
                loadingIndicator.style.display = '';
                pdfContainer.classList.remove('hidden');
            };
            
            pdfViewer.onerror = function() {
                loadingIndicator.classList.add('hidden');
                loadingIndicator.style.display = '';
                welcomeMessage.classList.remove('hidden');
                alert('Error loading PDF file. Please try again or use the "Open in New Tab" option.');
            };
            
            pdfViewer.src = encodedPath;
            
            // Fallback timeout in case onload doesn't fire
            setTimeout(() => {
                if (loadingIndicator.style.display === 'flex') {
                    loadingIndicator.classList.add('hidden');
                    loadingIndicator.style.display = '';
                    pdfContainer.classList.remove('hidden');
                }
            }, PDF_LOAD_TIMEOUT_MS);
        }

        // Sidebar toggle for mobile
        document.getElementById('toggleSidebar').addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
            sidebarOverlay.classList.toggle('hidden');
        });

        sidebarOverlay.addEventListener('click', closeSidebar);

        function closeSidebar() {
            if (window.innerWidth < 1024) {
                sidebar.classList.add('-translate-x-full');
                sidebarOverlay.classList.add('hidden');
            }
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 1024) {
                sidebar.classList.remove('-translate-x-full');
                sidebarOverlay.classList.add('hidden');
            }
        });

        // Initialize
        buildFileTree();
    </script>
</body>
</html>
